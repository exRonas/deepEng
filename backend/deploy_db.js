const sqlite3 = require('sqlite3').verbose();
const path = require('path');
const fs = require('fs');

const dbPath = path.resolve(__dirname, 'db/deepeng.sqlite');

// Ensure db directory exists
const dbDir = path.dirname(dbPath);
if (!fs.existsSync(dbDir)){
    fs.mkdirSync(dbDir, { recursive: true });
}

const db = new sqlite3.Database(dbPath);

async function setup() {
    return new Promise((resolve, reject) => {
        db.serialize(() => {
            console.log("üîÑ Starting Database Deployment...");

            // 1. Create Tables (Schema)
            db.run(`CREATE TABLE IF NOT EXISTS users (
                id INTEGER PRIMARY KEY AUTOINCREMENT,
                username TEXT UNIQUE,
                phone TEXT UNIQUE,
                full_name TEXT,
                password TEXT,
                role TEXT DEFAULT 'student',
                level TEXT DEFAULT 'A1',
                teacher_id INTEGER,
                created_at DATETIME DEFAULT CURRENT_TIMESTAMP
            )`);

            db.run(`CREATE TABLE IF NOT EXISTS modules (
                id INTEGER PRIMARY KEY AUTOINCREMENT,
                level TEXT,
                type TEXT,
                title TEXT,
                description TEXT,
                content TEXT
            )`);

            db.run(`CREATE TABLE IF NOT EXISTS exercises (
                id INTEGER PRIMARY KEY AUTOINCREMENT,
                module_id INTEGER,
                type TEXT,
                question TEXT,
                options TEXT,
                correct_answer TEXT,
                explanation TEXT,
                FOREIGN KEY(module_id) REFERENCES modules(id)
            )`);

            db.run(`CREATE TABLE IF NOT EXISTS progress (
                id INTEGER PRIMARY KEY AUTOINCREMENT,
                user_id INTEGER,
                module_id INTEGER,
                score INTEGER,
                reflection TEXT,
                details TEXT,
                ai_history TEXT,
                completed_at DATETIME DEFAULT CURRENT_TIMESTAMP,
                FOREIGN KEY(user_id) REFERENCES users(id),
                FOREIGN KEY(module_id) REFERENCES modules(id)
            )`);

             db.run(`CREATE TABLE IF NOT EXISTS assignments (
                id INTEGER PRIMARY KEY AUTOINCREMENT,
                teacher_id INTEGER,
                module_id INTEGER,
                assigned_at DATETIME DEFAULT CURRENT_TIMESTAMP,
                FOREIGN KEY(teacher_id) REFERENCES users(id),
                FOREIGN KEY(module_id) REFERENCES modules(id)
            )`, (err) => {
                 // After table creation, ensure unique index exists
                 if(!err) {
                     db.run(`CREATE UNIQUE INDEX IF NOT EXISTS idx_assignments_teacher_module ON assignments (teacher_id, module_id)`);
                 }
            });
            
             db.run(`CREATE TABLE IF NOT EXISTS dictionary (
                id INTEGER PRIMARY KEY AUTOINCREMENT,
                user_id INTEGER,
                word TEXT,
                translation TEXT,
                context TEXT,
                added_at DATETIME DEFAULT CURRENT_TIMESTAMP,
                FOREIGN KEY(user_id) REFERENCES users(id)
            )`);


            // 2. Clear Content Tables (Keep Users/Progress/Dictionary safe-ish)
            console.log("üßπ Clearing old content data (Modules & Exercises)...");
            // NOTE: We do NOT clear assignments here, because assignments are user-state (which modules are open).
            // But if modules are deleted and re-inserted with potentially new IDs, assignments might break if IDs shift.
            // Since we insert with explicit IDs below, it should be safe IF the IDs match the source DB.
            
            db.run("DELETE FROM exercises");
            db.run("DELETE FROM modules");
            db.run("DELETE FROM sqlite_sequence WHERE name='modules' OR name='exercises'"); 

            // 3. Insert Modules
            console.log("üì¶ Insert Modules...");
            const stmtModule = db.prepare("INSERT INTO modules (id, level, type, title, description, content) VALUES (?, ?, ?, ?, ?, ?)");
            [{"id":5,"level":"A1","type":"grammar","title":"Grammar A1: –ì–ª–∞–≥–æ–ª \"to be\"","description":"–í—ã—É—á–∏ —Å–∞–º—ã–π –≥–ª–∞–≤–Ω—ã–π –≥–ª–∞–≥–æ–ª –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ —è–∑—ã–∫–∞!","content":"{\"theory\":[\"**MINI-LECTURE (–û–±—ä—è—Å–Ω–µ–Ω–∏–µ)**\",\"**–¢–µ–º–∞**: –ì–ª–∞–≥–æ–ª TO BE –≤ –Ω–∞—Å—Ç–æ—è—â–µ–º –≤—Ä–µ–º–µ–Ω–∏\",\"**–£—Ä–æ–≤–µ–Ω—å**: A1\",\"\",\"**–ß—Ç–æ —Ç–∞–∫–æ–µ –≥–ª–∞–≥–æ–ª TO BE?**\",\"–≠—Ç–æ —Å–∞–º—ã–π –≤–∞–∂–Ω—ã–π –≥–ª–∞–≥–æ–ª –≤ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º —è–∑—ã–∫–µ. –û–Ω –æ–∑–Ω–∞—á–∞–µ—Ç \\\"–±—ã—Ç—å\\\", \\\"–Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è\\\", \\\"—è–≤–ª—è—Ç—å—Å—è\\\".\",\"\",\"**–¢—Ä–∏ —Ñ–æ—Ä–º—ã –≤ –Ω–∞—Å—Ç–æ—è—â–µ–º –≤—Ä–µ–º–µ–Ω–∏**:\",\"1. **am** - —è –µ—Å—Ç—å (—Ç–æ–ª—å–∫–æ —Å I)\",\"2. **is** - –æ–Ω/–æ–Ω–∞/–æ–Ω–æ –µ—Å—Ç—å (—Å he, she, it, –∏ —Å –æ–¥–Ω–∏–º —á–µ–ª–æ–≤–µ–∫–æ–º/–ø—Ä–µ–¥–º–µ—Ç–æ–º)\",\"3. **are** - –º—ã/–≤—ã/–æ–Ω–∏ –µ—Å—Ç—å (—Å we, you, they, –∏ —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –ª—é–¥—å–º–∏/–ø—Ä–µ–¥–º–µ—Ç–∞–º–∏)\",\"\",\"**–¢–∞–±–ª–∏—Ü–∞ —Ñ–æ—Ä–º**:\",{\"type\":\"table\",\"headers\":[\"–ú–µ—Å—Ç–æ–∏–º–µ–Ω–∏–µ\",\"TO BE\",\"–ü–µ—Ä–µ–≤–æ–¥\",\"–ü—Ä–∏–º–µ—Ä\"],\"rows\":[[\"I\",\"am\",\"–Ø –µ—Å—Ç—å\",\"I am a student.\"],[\"He\",\"is\",\"–û–Ω –µ—Å—Ç—å\",\"He is my brother.\"],[\"She\",\"is\",\"–û–Ω–∞ –µ—Å—Ç—å\",\"She is my mother.\"],[\"It\",\"is\",\"–û–Ω/–æ–Ω–æ –µ—Å—Ç—å\",\"It is a cat.\"],[\"We\",\"are\",\"–ú—ã –µ—Å—Ç—å\",\"We are friends.\"],[\"You\",\"are\",\"–¢—ã/–í—ã –µ—Å—Ç—å\",\"You are a teacher.\"],[\"They\",\"are\",\"–û–Ω–∏ –µ—Å—Ç—å\",\"They are my parents.\"]]},\"\",\"**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ–º TO BE?**\",\"1. –ü—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ–º—Å—è: I am Asel.\",\"2. –ì–æ–≤–æ—Ä–∏–º –æ –ø—Ä–æ—Ñ–µ—Å—Å–∏–∏: She is a doctor.\",\"3. –û–ø–∏—Å—ã–≤–∞–µ–º: He is tall.\",\"4. –ì–æ–≤–æ—Ä–∏–º –æ –≤–æ–∑—Ä–∞—Å—Ç–µ: I am 12 years old.\",\"5. –ì–æ–≤–æ—Ä–∏–º –æ –º–µ—Å—Ç–µ: We are at school.\",\"\",\"**–û—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–∞—è —Ñ–æ—Ä–º–∞**:\",\"–ü—Ä–æ—Å—Ç–æ –¥–æ–±–∞–≤–ª—è–µ–º **NOT** –ø–æ—Å–ª–µ am/is/are:\",\"‚Ä¢ I am ‚Üí I am not (I'm not)\",\"‚Ä¢ He is ‚Üí He is not (He isn't)\",\"‚Ä¢ They are ‚Üí They are not (They aren't)\",\"\",\"**–í–æ–ø—Ä–æ—Å–∏—Ç–µ–ª—å–Ω–∞—è —Ñ–æ—Ä–º–∞**:\",\"–°—Ç–∞–≤–∏–º am/is/are **–í –ù–ê–ß–ê–õ–û** –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è:\",\"‚Ä¢ You are ‚Üí Are you...?\",\"‚Ä¢ He is ‚Üí Is he...?\",\"‚Ä¢ I am ‚Üí Am I...?\",\"\",\"**–°–æ–∫—Ä–∞—â—ë–Ω–Ω—ã–µ —Ñ–æ—Ä–º—ã**:\",\"‚Ä¢ I'm, He's, She's, It's, We're, You're, They're\",\"‚Ä¢ isn't, aren't (am not –Ω–µ —Å–æ–∫—Ä–∞—â–∞–µ—Ç—Å—è!)\"],\"ai_task\":{\"prompt\":\"–ù–∞–∂–º–∏ 'Talk to AI'. \\n\\n–ó–∞–¥–∞–Ω–∏–µ 1: –°–∫–∞–∂–∏ 3 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –æ —Å–µ–±–µ –∏—Å–ø–æ–ª—å–∑—É—è 'am' (I am...). \\n–ó–∞–¥–∞–Ω–∏–µ 2: –ó–∞–¥–∞–π –ò–ò 3 –≤–æ–ø—Ä–æ—Å–∞ (Are you...? Is English...?).\",\"system_message\":\"You are a friendly English tutor. The student is learning 'to be' (am, is, are). \\n\\n1. Encourage the student to say sentences about themselves starting with 'I am'. Correct them gently if they miss 'am'.\\n2. Then ask the student to ask YOU questions. Answer simply.\\n3. Finally, ask yes/no questions like 'Are you a student?', 'Is your room big?' to practice short answers.\"},\"reflection\":[\"What was easy? (am/is/are, positive sentences, questions?)\",\"What was difficult? (When to use which form?)\",\"Can you use these sentences now? (I am..., He is..., Are you...?)\",\"How do you feel about 'to be'? (Easy, Needs practice, Confusing)\"]}"},{"id":6,"level":"A1","type":"vocabulary","title":"My Family","description":"Basic Family Members","content":"{\"theory\":[\"**MINI-LECTURE (–û–±—ä—è—Å–Ω–µ–Ω–∏–µ)**\",\"**–¢–µ–º–∞**: Basic Family Members\",\"**–£—Ä–æ–≤–µ–Ω—å**: A1\",\"\",\"**Useful Phrases (–ü–æ–ª–µ–∑–Ω—ã–µ —Ñ—Ä–∞–∑—ã)**:\",\"‚Ä¢ \\\"I have...\\\" (–£ –º–µ–Ω—è –µ—Å—Ç—å...)\",\"‚Ä¢ \\\"My ...'s name is...\\\" (–ú–æ–µ–≥–æ ... –∑–æ–≤—É—Ç...)\",\"‚Ä¢ \\\"We live together.\\\" (–ú—ã –∂–∏–≤–µ–º –≤–º–µ—Å—Ç–µ.)\",\"\",\"**New Words (10 —Å–ª–æ–≤)**:\",\"1. **mother** - (–º–∞–º–∞) ‚Äì the woman who is your parent\",\"2. **father** - (–ø–∞–ø–∞) ‚Äì the man who is your parent\",\"3. **sister** - (—Å–µ—Å—Ç—Ä–∞) ‚Äì a girl in your family\",\"4. **brother** - (–±—Ä–∞—Ç) ‚Äì a boy in your family\",\"5. **grandmother** - (–±–∞–±—É—à–∫–∞) ‚Äì your mother‚Äôs or father‚Äôs mother\",\"6. **grandfather** - (–¥–µ–¥—É—à–∫–∞) ‚Äì your mother‚Äôs or father‚Äôs father\",\"7. **family** - (—Å–µ–º—å—è) ‚Äì people in one family\",\"8. **parents** - (—Ä–æ–¥–∏—Ç–µ–ª–∏) ‚Äì a mother and a father\",\"9. **son** - (—Å—ã–Ω) ‚Äì a child who is a boy\",\"10. **daughter** - (–¥–æ—á—å) ‚Äì a child who is a girl\",\"\",\"**Simple Explanations**:\",\"These words are for people in your family. We use them every day when we talk about our home.\",\"\",\"**Examples**:\",\"1. \\\"My mother's name is Aigul.\\\"\",\"2. \\\"I have one brother and two sisters.\\\"\",\"3. \\\"My grandfather is 70 years old.\\\"\",\"4. \\\"We are a big family.\\\"\",\"\",\"**–ü–û–ú–ï–¢–ö–ê: ‚Äôs = –ß–¨–Å –≠–¢–û?**\",\"–ö–æ–≥–¥–∞ –º—ã —Ö–æ—Ç–∏–º —Å–∫–∞–∑–∞—Ç—å, —á—Ç–æ —ç—Ç–æ –ß–¨–Å-–¢–û (—ç—Ç–æ –Ω–∞—à–µ / –µ–≥–æ / –µ—ë), –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º **‚Äôs**.\",\"–ü—Ä–∏–º–µ—Ä: Tom‚Äôs bag ‚Äì —Å—É–º–∫–∞ –¢–æ–º–∞\",\"–í–æ–ø—Ä–æ—Å: Whose book? (–ß—å—è –∫–Ω–∏–≥–∞?)\",\"–û—Ç–≤–µ—Ç: Anna‚Äôs book.\",\"**–í–∞–∂–Ω–æ**:\",\"‚Ä¢ ‚Äôs = –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç\",\"‚Ä¢ —Å—Ç–∞–≤–∏–º ‚Äôs –ø–æ—Å–ª–µ —á–µ–ª–æ–≤–µ–∫–∞\"],\"ai_task\":{\"prompt\":\"Click 'Talk to AI'. Tell AI about your family. Use at least 5 words from the lesson.\",\"system_message\":\"You are a friendly English tutor. The student is learning family members (mother, father, brother, sister...). \\n\\nGoal: Help the student talk about their family using the new words.\\n\\n1. Ask: 'Tell me about your family. '.\\n2. If they make mistakes, correct them gently. \\n3. Ask follow up questions: 'What is your mother's name?', 'How old is your brother?'.\\n4. If they struggle, give them a definition and ask for the word (e.g. 'Who is your father's father?').\"},\"reflection\":[\"What was easy? (Multiple choice, Matching, Fill in gaps?)\",\"What was difficult? (New words, Making sentences, Grammar?)\",\"How do you feel about this lesson? (Happy, OK, Need help)\",\"Which words will you use tomorrow?\"]}"},{"id":7,"level":"A1","type":"reading","title":"Reading A1: –¢–µ–∫—Å—Ç \"–ú–æ—è –°–µ–º—å—è\"","description":"–ü—Ä–æ—á–∏—Ç–∞–π —Ç–µ–∫—Å—Ç –ø—Ä–æ –ê–π—Å—É–ª—É –∏ –µ—ë —Å–µ–º—å—é.","content":"{\"theory\":[\"**MINI-LECTURE (–û–±—ä—è—Å–Ω–µ–Ω–∏–µ)**\",\"**–¢–µ–º–∞**: –ß—Ç–µ–Ω–∏–µ –ø—Ä–æ—Å—Ç—ã—Ö —Ç–µ–∫—Å—Ç–æ–≤ –æ —Å–µ–º—å–µ\",\"\",\"**–ß—Ç–æ —Ç–∞–∫–æ–µ Reading?**\",\"Reading - —ç—Ç–æ —á—Ç–µ–Ω–∏–µ –∏ –ø–æ–Ω–∏–º–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–æ–≤ –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º —è–∑—ã–∫–µ. –ú—ã —á–∏—Ç–∞–µ–º, —á—Ç–æ–±—ã —É–∑–Ω–∞—Ç—å –Ω–æ–≤—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é, –Ω–∞–π—Ç–∏ –æ—Ç–≤–µ—Ç—ã –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –∏ –ø–æ–Ω—è—Ç—å, –æ —á—ë–º —Ç–µ–∫—Å—Ç.\",\"\",\"**–°—Ç—Ä–∞—Ç–µ–≥–∏–∏ —á—Ç–µ–Ω–∏—è –¥–ª—è –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö**:\",\"1. **–°–º–æ—Ç—Ä–∏ –Ω–∞ –∫–∞—Ä—Ç–∏–Ω–∫–∏** - –æ–Ω–∏ –ø–æ–º–æ–≥–∞—é—Ç –ø–æ–Ω—è—Ç—å —Ç–µ–∫—Å—Ç\",\"2. **–ò—â–∏ –∑–Ω–∞–∫–æ–º—ã–µ —Å–ª–æ–≤–∞** - —Å–ª–æ–≤–∞, –∫–æ—Ç–æ—Ä—ã–µ —Ç—ã —É–∂–µ –∑–Ω–∞–µ—à—å\",\"3. **–ù–µ –ø–µ—Ä–µ–≤–æ–¥–∏ –∫–∞–∂–¥–æ–µ —Å–ª–æ–≤–æ** - –ø—ã—Ç–∞–π—Å—è –ø–æ–Ω—è—Ç—å –æ–±—â–∏–π —Å–º—ã—Å–ª\",\"4. **–ß–∏—Ç–∞–π –≤—Å–ª—É—Ö** - —ç—Ç–æ –ø–æ–º–æ–≥–∞–µ—Ç —Å –ø—Ä–æ–∏–∑–Ω–æ—à–µ–Ω–∏–µ–º\",\"\",\"**–ü–æ–ª–µ–∑–Ω—ã–µ —Ñ—Ä–∞–∑—ã –¥–ª—è —á—Ç–µ–Ω–∏—è**:\",\"‚Ä¢ I think... - –Ø –¥—É–º–∞—é...\",\"‚Ä¢ In the text... - –í —Ç–µ–∫—Å—Ç–µ...\",\"‚Ä¢ The text says... - –í —Ç–µ–∫—Å—Ç–µ –≥–æ–≤–æ—Ä–∏—Ç—Å—è...\",\"‚Ä¢ I don't understand... - –Ø –Ω–µ –ø–æ–Ω–∏–º–∞—é...\",\"\",\"**–ù–æ–≤—ã–µ —Å–ª–æ–≤–∞ –¥–ª—è —ç—Ç–æ–≥–æ —É—Ä–æ–∫–∞**:\",\"1. **live** - –∂–∏—Ç—å\",\"2. **with** - —Å\",\"3. **house** - –¥–æ–º\",\"4. **pet** - –¥–æ–º–∞—à–Ω–µ–µ –∂–∏–≤–æ—Ç–Ω–æ–µ\",\"5. **like** - –Ω—Ä–∞–≤–∏—Ç—å—Å—è\",\"6. **play** - –∏–≥—Ä–∞—Ç—å\",\"7. **together** - –≤–º–µ—Å—Ç–µ\"],\"text\":\"Hello! My name is Aisulu. I am 11 years old. I live in Almaty with my family.\\nWe are a big family. I have a mother, a father, one brother and one sister. My mother's name is Aigul. She is a teacher. My father's name is Daniyar. He is a doctor.\\nMy brother is 13 years old. His name is Arman. My sister is 8 years old. Her name is Aruzhan.\\nWe have a cat. Its name is Tom. I like my cat. We play together.\\nI love my family!\",\"translation\":\"–ü—Ä–∏–≤–µ—Ç! –ú–µ–Ω—è –∑–æ–≤—É—Ç –ê–π—Å—É–ª—É. –ú–Ω–µ 11 –ª–µ—Ç. –Ø –∂–∏–≤—É –≤ –ê–ª–º–∞—Ç—ã —Å –º–æ–µ–π —Å–µ–º—å–µ–π.\\n–ú—ã –±–æ–ª—å—à–∞—è —Å–µ–º—å—è. –£ –º–µ–Ω—è –µ—Å—Ç—å –º–∞–º–∞, –ø–∞–ø–∞, –æ–¥–∏–Ω –±—Ä–∞—Ç –∏ –æ–¥–Ω–∞ —Å–µ—Å—Ç—Ä–∞. –ò–º—è –º–æ–µ–π –º–∞–º—ã - –ê–π–≥—É–ª—å. –û–Ω–∞ —É—á–∏—Ç–µ–ª—å. –ò–º—è –º–æ–µ–≥–æ –ø–∞–ø—ã - –î–∞–Ω–∏—è—Ä. –û–Ω –≤—Ä–∞—á.\\n–ú–æ–µ–º—É –±—Ä–∞—Ç—É 13 –ª–µ—Ç. –ï–≥–æ –∑–æ–≤—É—Ç –ê—Ä–º–∞–Ω. –ú–æ–µ–π —Å–µ—Å—Ç—Ä–µ 8 –ª–µ—Ç. –ï–µ –∑–æ–≤—É—Ç –ê—Ä—É–∂–∞–Ω.\\n–£ –Ω–∞—Å –µ—Å—Ç—å –∫–æ—Ç. –ï–≥–æ –∑–æ–≤—É—Ç –¢–æ–º. –ú–Ω–µ –Ω—Ä–∞–≤–∏—Ç—Å—è –º–æ–π –∫–æ—Ç. –ú—ã –∏–≥—Ä–∞–µ–º –≤–º–µ—Å—Ç–µ.\\n–Ø –ª—é–±–ª—é —Å–≤–æ—é —Å–µ–º—å—é!\",\"image\":\"/pronounce/a1/reading/photo_2026-01-09_13-40-24.jpg\",\"ai_task\":{\"prompt\":\"–ù–∞–∂–º–∏ 'Talk to AI'. –ò–ò –∑–∞–¥–∞—Å—Ç —Ç–µ–±–µ –≤–æ–ø—Ä–æ—Å—ã –ø–æ —Ç–µ–∫—Å—Ç—É (–Ω–∞–ø—Ä–∏–º–µ—Ä 'What is the girl's name?'). –ó–∞—Ç–µ–º —Ä–∞—Å—Å–∫–∞–∂–∏ –ò–ò –æ —Å–≤–æ–µ–π —Å–µ–º—å–µ (—Å–∫–æ–ª—å–∫–æ —á–µ–ª–æ–≤–µ–∫, –µ—Å—Ç—å –ª–∏ –∂–∏–≤–æ—Ç–Ω—ã–µ).\",\"system_message\":\"You are a friendly English tutor for A1 level students. The student just read a text about Aisulu's family. \\n\\nTask 1: Ask 3 simple comprehension questions about the text (e.g., 'Where does Aisulu live?', 'Who is Arman?', 'What pet do they have?'). Wait for the student's answer after each question.\\n\\nTask 2: Ask the student about THEIR family. 'How big is your family?', 'Do you have brothers or sisters?', 'Do you have a pet?'.\\n\\nTask 3: Ask a prediction question: 'What do you think Aisulu will do tomorrow?'.\\n\\nKeep your language very simple (A1). Correct major mistakes gently.\"},\"reflection\":[\"What was easy in this reading? (Understanding names, ages, family words?)\",\"What was difficult? (New words, sentences, answering questions?)\",\"How much did you understand? (Everything, Most, Some, Little)\",\"Did you learn the new words? (live, with, house, pet, like, play, together)\"]}"},{"id":8,"level":"A1","type":"writing","title":"About Me","description":"Writing simple sentences about yourself","content":"{\"theory\":[\"**MINI-LECTURE (–û–±—ä—è—Å–Ω–µ–Ω–∏–µ)**\",\"**–¢–µ–º–∞**: –ù–∞–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ—Å—Ç—ã—Ö –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π –æ —Å–µ–±–µ\",\"**–£—Ä–æ–≤–µ–Ω—å**: A1\",\"\",\"**–ß—Ç–æ —Ç–∞–∫–æ–µ Writing?**\",\"Writing - —ç—Ç–æ —É–º–µ–Ω–∏–µ –ø–∏—Å–∞—Ç—å –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º —è–∑—ã–∫–µ. –ù–∞ —É—Ä–æ–≤–Ω–µ A1 –º—ã —É—á–∏–º—Å—è:\",\"1. –ü–∏—Å–∞—Ç—å —Å–ª–æ–≤–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ (spelling)\",\"2. –°–æ—Å—Ç–∞–≤–ª—è—Ç—å –ø—Ä–æ—Å—Ç—ã–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è\",\"3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∑–∞–≥–ª–∞–≤–Ω—ã–µ –±—É–∫–≤—ã –∏ —Ç–æ—á–∫–∏\",\"4. –û—Ç–≤–µ—á–∞—Ç—å –Ω–∞ –ø—Ä–æ—Å—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã\",\"\",\"**–û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –ø–∏—Å—å–º–∞ –¥–ª—è –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö**:\",\"1. –ù–∞—á–∏–Ω–∞–π –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ —Å –∑–∞–≥–ª–∞–≤–Ω–æ–π –±—É–∫–≤—ã\",\"2. –ó–∞–∫–∞–Ω—á–∏–≤–∞–π –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ —Ç–æ—á–∫–æ–π (.)\",\"3. –ü–∏—à–∏ —Å–ª–æ–≤–∞ —Å –ø—Ä–æ–±–µ–ª–∞–º–∏ –º–µ–∂–¥—É –Ω–∏–º–∏\",\"4. –ü—Ä–æ–≤–µ—Ä—è–π –Ω–∞–ø–∏—Å–∞–Ω–∏–µ —Å–ª–æ–≤\",\"\",\"**Word Bank (–ë–∞–Ω–∫ —Å–ª–æ–≤ –¥–ª—è –ø–∏—Å—å–º–∞)**:\",\"**–ì–æ—Ä–æ–¥–∞**: Almaty, Astana (Nur-Sultan), Shymkent, Aktobe, Karaganda, Aktau, Atyrau\",\"**–°–µ–º—å—è**: brother, sister, mother, father, parents, grandmother, grandfather\",\"**–•–æ–±–±–∏**: football, basketball, drawing, singing, dancing, reading, music, games\",\"**–ñ–∏–≤–æ—Ç–Ω—ã–µ**: dog, cat, fish, hamster, bird\",\"\",\"**–®–∞–±–ª–æ–Ω—ã –¥–ª—è —ç—Ç–æ–≥–æ —É—Ä–æ–∫–∞**:\",\"1. My name is ______. (–ú–µ–Ω—è –∑–æ–≤—É—Ç ______.)\",\"2. I am ______ years old. (–ú–Ω–µ ______ –ª–µ—Ç.)\",\"3. I am from ______. (–Ø –∏–∑ ______.)\",\"4. I have a ______. (–£ –º–µ–Ω—è –µ—Å—Ç—å ______.)\",\"5. I like ______. (–ú–Ω–µ –Ω—Ä–∞–≤–∏—Ç—Å—è ______.)\"],\"ai_task\":{\"prompt\":\"–ó–∞–¥–∞–Ω–∏–µ: –ù–∞–ø–∏—à–∏ 5 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π –æ —Å–µ–±–µ. –ò—Å–ø–æ–ª—å–∑—É–π —à–∞–±–ª–æ–Ω—ã:\\n1. My name is...\\n2. I am ... years old.\\n3. I am from...\\n4. I have ...\\n5. I like ...\\n\\n–ù–∞–∂–º–∏ 'Talk to AI' –∏ –æ—Ç–ø—Ä–∞–≤—å —Å–≤–æ–π —Ç–µ–∫—Å—Ç. –ò–ò –ø—Ä–æ–≤–µ—Ä–∏—Ç –æ—à–∏–±–∫–∏.\",\"system_message\":\"You are a helpful English writing tutor. The student will send you a short text about themselves (5 sentences). \\n\\n1. Check for capitalization (start of sentence, names, 'I').\\n2. Check for punctuation (periods).\\n3. Check for specific grammar points: 'I am', 'My name is', 'I have a...', 'I like...'.\\n4. If the text is good, say 'Great job!' and ask a follow-up question like 'What is your brother's name?' or 'What do you like to draw?'. \\n5. If there are mistakes, kindly point them out: 'Don't forget the capital letter for 'I'.' or 'Remember to put a period.'.\"},\"reflection\":[\"What was easy in this writing? (Writing name, age, family, likes?)\",\"What was difficult? (Spelling, Capital letters, 'am/is/are'?)\",\"How do you feel about your writing now? (Confident, OK, Still difficult)\",\"What will you remember for next time? (Capital letters, Dots, Spelling)\"]}"}].forEach(m => {
                stmtModule.run(m.id, m.level, m.type, m.title, m.description, m.content);
            });
            stmtModule.finalize();

            // 4. Insert Exercises
            console.log("üìù Insert Exercises...");
            const stmtExercise = db.prepare("INSERT INTO exercises (id, module_id, type, question, options, correct_answer, explanation) VALUES (?, ?, ?, ?, ?, ?, ?)");
            [{"id":19,"module_id":7,"type":"true-false","question":"Aisulu is 12 years old.","options":"[\"True\",\"False\"]","correct_answer":"False","explanation":"She is 11 years old."},{"id":20,"module_id":7,"type":"true-false","question":"She has one brother and one sister.","options":"[\"True\",\"False\"]","correct_answer":"True","explanation":"Correct. One brother (Arman) and one sister (Aruzhan)."},{"id":21,"module_id":7,"type":"true-false","question":"Her mother is a doctor.","options":"[\"True\",\"False\"]","correct_answer":"False","explanation":"Her mother is a teacher. Her father is a doctor."},{"id":22,"module_id":7,"type":"true-false","question":"They have a dog.","options":"[\"True\",\"False\"]","correct_answer":"False","explanation":"They have a cat named Tom."},{"id":23,"module_id":7,"type":"true-false","question":"She loves her family.","options":"[\"True\",\"False\"]","correct_answer":"True","explanation":"Text says: \"I love my family!\""},{"id":24,"module_id":7,"type":"multiple-choice","question":"Where does Aisulu live?","options":"[\"Astana\",\"Almaty\",\"Shymkent\",\"Aktobe\"]","correct_answer":"Almaty","explanation":"Text says: \"I live in Almaty...\""},{"id":25,"module_id":7,"type":"multiple-choice","question":"How old is her brother?","options":"[\"11\",\"13\",\"8\",\"10\"]","correct_answer":"13","explanation":"Text says: \"My brother is 13 years old.\""},{"id":26,"module_id":7,"type":"multiple-choice","question":"What is her pet's name?","options":"[\"Max\",\"Tom\",\"Kitty\",\"Barsik\"]","correct_answer":"Tom","explanation":"Text says: \"We have a cat. Its name is Tom.\""},{"id":27,"module_id":7,"type":"multiple-choice","question":"What does her father do?","options":"[\"teacher\",\"driver\",\"doctor\",\"student\"]","correct_answer":"doctor","explanation":"Text says: \"My father's name is Daniyar. He is a doctor.\""},{"id":28,"module_id":7,"type":"multiple-choice","question":"How many people are in her family?","options":"[\"3\",\"4\",\"5\",\"6\"]","correct_answer":"5","explanation":"Mother, Father, Brother, Sister, Aisulu = 5."},{"id":29,"module_id":7,"type":"multiple-choice","question":"Who fits this description: \"13 years old, name Arman\"?","options":"[\"Aisulu\",\"Mother\",\"Father\",\"Brother\",\"Sister\"]","correct_answer":"Brother","explanation":"Arman is the brother."},{"id":30,"module_id":7,"type":"multiple-choice","question":"Who fits this description: \"8 years old, name Aruzhan\"?","options":"[\"Aisulu\",\"Mother\",\"Father\",\"Brother\",\"Sister\"]","correct_answer":"Sister","explanation":"Aruzhan is the sister."},{"id":31,"module_id":7,"type":"multiple-choice","question":"Who fits this description: \"11 years old, likes cat\"?","options":"[\"Aisulu\",\"Mother\",\"Father\",\"Brother\",\"Sister\"]","correct_answer":"Aisulu","explanation":"This describes the narrator, Aisulu."},{"id":32,"module_id":7,"type":"multiple-choice","question":"Who fits this description: \"doctor, name Daniyar\"?","options":"[\"Aisulu\",\"Mother\",\"Father\",\"Brother\",\"Sister\"]","correct_answer":"Father","explanation":"Daniyar is the father."},{"id":33,"module_id":7,"type":"multiple-choice","question":"Who fits this description: \"teacher, name Aigul\"?","options":"[\"Aisulu\",\"Mother\",\"Father\",\"Brother\",\"Sister\"]","correct_answer":"Mother","explanation":"Aigul is the mother."},{"id":34,"module_id":7,"type":"fill-gap","question":"Aisulu lives in ______.","options":"[\"Astana\",\"Almaty\",\"Moscow\"]","correct_answer":"Almaty","explanation":"She lives in Almaty."},{"id":35,"module_id":7,"type":"fill-gap","question":"She has one ______ and one sister.","options":"[\"friend\",\"brother\",\"uncle\"]","correct_answer":"brother","explanation":"She has one brother."},{"id":36,"module_id":7,"type":"fill-gap","question":"Her mother is a ______.","options":"[\"doctor\",\"teacher\",\"driver\"]","correct_answer":"teacher","explanation":"Her mother is a teacher."},{"id":37,"module_id":7,"type":"fill-gap","question":"Their pet is a ______.","options":"[\"dog\",\"cat\",\"bird\"]","correct_answer":"cat","explanation":"They have a cat."},{"id":38,"module_id":7,"type":"fill-gap","question":"The cat's name is ______.","options":"[\"Tom\",\"Jerry\",\"Simba\"]","correct_answer":"Tom","explanation":"The cat is named Tom."},{"id":39,"module_id":5,"type":"multiple-choice","question":"I ___ from Kazakhstan.","options":"[\"am\",\"is\",\"are\",\"be\"]","correct_answer":"am","explanation":"I am (–í—Å–µ–≥–¥–∞ —Å I)."},{"id":40,"module_id":5,"type":"multiple-choice","question":"My sister ___ 10 years old.","options":"[\"am\",\"is\",\"are\",\"be\"]","correct_answer":"is","explanation":"My sister = She. She is."},{"id":41,"module_id":5,"type":"multiple-choice","question":"We ___ students.","options":"[\"am\",\"is\",\"are\",\"be\"]","correct_answer":"are","explanation":"We are (–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ —á–∏—Å–ª–æ)."},{"id":42,"module_id":5,"type":"multiple-choice","question":"It ___ a big house.","options":"[\"am\",\"is\",\"are\",\"be\"]","correct_answer":"is","explanation":"It is (–ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ —á–∏—Å–ª–æ, –Ω–µ–æ–¥—É—à–µ–≤–ª–µ–Ω–Ω–æ–µ)."},{"id":43,"module_id":5,"type":"multiple-choice","question":"They ___ my friends.","options":"[\"am\",\"is\",\"are\",\"be\"]","correct_answer":"are","explanation":"They are (–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ —á–∏—Å–ª–æ)."},{"id":44,"module_id":5,"type":"multiple-choice","question":"–ö–∞–∫–∞—è —Ñ–æ—Ä–º–∞ –≥–ª–∞–≥–æ–ª–∞ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è \"I\"?","options":"[\"am\",\"is\",\"are\"]","correct_answer":"am","explanation":"I am."},{"id":45,"module_id":5,"type":"multiple-choice","question":"–ö–∞–∫–∞—è —Ñ–æ—Ä–º–∞ –≥–ª–∞–≥–æ–ª–∞ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è \"He, She, It\"?","options":"[\"am\",\"is\",\"are\"]","correct_answer":"is","explanation":"He is, She is, It is."},{"id":46,"module_id":5,"type":"multiple-choice","question":"–ö–∞–∫–∞—è —Ñ–æ—Ä–º–∞ –≥–ª–∞–≥–æ–ª–∞ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è \"We, You, They\"?","options":"[\"am\",\"is\",\"are\"]","correct_answer":"are","explanation":"We are, You are, They are."},{"id":47,"module_id":5,"type":"fill-gap","question":"My name ___ Daniyar.","options":"[\"am\",\"is\",\"are\"]","correct_answer":"is","explanation":"My name = It (or substitute He/She). It is Daniyar."},{"id":48,"module_id":5,"type":"fill-gap","question":"I ___ 11 years old.","options":"[\"am\",\"is\",\"are\"]","correct_answer":"am","explanation":"I am."},{"id":49,"module_id":5,"type":"fill-gap","question":"My parents ___ teachers.","options":"[\"am\",\"is\",\"are\"]","correct_answer":"are","explanation":"My parents = They. They are."},{"id":50,"module_id":5,"type":"fill-gap","question":"She ___ my best friend.","options":"[\"am\",\"is\",\"are\"]","correct_answer":"is","explanation":"She is."},{"id":51,"module_id":5,"type":"fill-gap","question":"We ___ from Almaty.","options":"[\"am\",\"is\",\"are\"]","correct_answer":"are","explanation":"We are."},{"id":52,"module_id":5,"type":"fill-gap","question":"It ___ a beautiful day.","options":"[\"am\",\"is\",\"are\"]","correct_answer":"is","explanation":"It is."},{"id":53,"module_id":5,"type":"fill-gap","question":"You ___ a good student.","options":"[\"am\",\"is\",\"are\"]","correct_answer":"are","explanation":"You are."},{"id":54,"module_id":5,"type":"fill-gap","question":"They ___ in the classroom.","options":"[\"am\",\"is\",\"are\"]","correct_answer":"are","explanation":"They are."},{"id":55,"module_id":5,"type":"multiple-choice","question":"–°–æ—Å—Ç–∞–≤—å –≤–æ–ø—Ä–æ—Å: you / Are / a student?","options":"[\"You are a student?\",\"Are you a student?\",\"A student are you?\"]","correct_answer":"Are you a student?","explanation":"To ask a question, put \"Are\" at the start: \"Are you...?\""},{"id":56,"module_id":5,"type":"multiple-choice","question":"–°–æ—Å—Ç–∞–≤—å –≤–æ–ø—Ä–æ—Å: she / Is / your sister?","options":"[\"Is she your sister?\",\"She is your sister?\",\"Sister is she your?\"]","correct_answer":"Is she your sister?","explanation":"Start with \"Is\": \"Is she...?\""},{"id":57,"module_id":5,"type":"multiple-choice","question":"–°–æ—Å—Ç–∞–≤—å –≤–æ–ø—Ä–æ—Å: they / Are / at home?","options":"[\"At home are they?\",\"They are at home?\",\"Are they at home?\"]","correct_answer":"Are they at home?","explanation":"Start with \"Are\": \"Are they...?\""},{"id":58,"module_id":5,"type":"multiple-choice","question":"–°–æ—Å—Ç–∞–≤—å –≤–æ–ø—Ä–æ—Å: he / Is / from Astana?","options":"[\"He is from Astana?\",\"Is he from Astana?\",\"Is Astana from he?\"]","correct_answer":"Is he from Astana?","explanation":"Start with \"Is\": \"Is he...?\""},{"id":59,"module_id":5,"type":"multiple-choice","question":"–°–æ—Å—Ç–∞–≤—å –≤–æ–ø—Ä–æ—Å: it / Is / a dog?","options":"[\"Is it a dog?\",\"It is a dog?\",\"Dog is it a?\"]","correct_answer":"Is it a dog?","explanation":"Start with \"Is\": \"Is it...?\""},{"id":60,"module_id":6,"type":"multiple-choice","question":"My father's father is my ___.","options":"[\"uncle\",\"grandfather\",\"cousin\",\"brother\"]","correct_answer":"grandfather","explanation":"Father's father = Grandfather."},{"id":61,"module_id":6,"type":"multiple-choice","question":"My mother's daughter is my ___.","options":"[\"aunt\",\"grandmother\",\"sister\",\"mother\"]","correct_answer":"sister","explanation":"Mother's daughter = Sister (or me, if I am a girl, but sister is the best fit)."},{"id":62,"module_id":6,"type":"multiple-choice","question":"My brother's son is my ___.","options":"[\"nephew\",\"niece\",\"cousin\",\"grandson\"]","correct_answer":"nephew","explanation":"Brother's son = Nephew."},{"id":63,"module_id":6,"type":"multiple-choice","question":"We are a happy ___.","options":"[\"home\",\"house\",\"family\",\"school\"]","correct_answer":"family","explanation":"Happy family."},{"id":64,"module_id":6,"type":"multiple-choice","question":"My ___ is 8 years old.","options":"[\"mother\",\"father\",\"sister\",\"grandmother\"]","correct_answer":"sister","explanation":"Sister fits best for an 8 year old (Mother/Father/Granny are older)."},{"id":65,"module_id":6,"type":"multiple-choice","question":"Who is \"She is your female parent\"?","options":"[\"mother\",\"father\",\"sister\"]","correct_answer":"mother","explanation":"Female parent = mother."},{"id":66,"module_id":6,"type":"multiple-choice","question":"Who is \"He is your male parent\"?","options":"[\"mother\",\"father\",\"brother\"]","correct_answer":"father","explanation":"Male parent = father."},{"id":67,"module_id":6,"type":"multiple-choice","question":"Who is \"A girl with same parents\"?","options":"[\"sister\",\"aunt\",\"grandmother\"]","correct_answer":"sister","explanation":"Girl with same parents = sister."},{"id":68,"module_id":6,"type":"multiple-choice","question":"Who is \"A boy with same parents\"?","options":"[\"brother\",\"uncle\",\"grandfather\"]","correct_answer":"brother","explanation":"Boy with same parents = brother."},{"id":69,"module_id":6,"type":"multiple-choice","question":"What is \"A group of relatives\"?","options":"[\"family\",\"school\",\"class\"]","correct_answer":"family","explanation":"Group of relatives = family."},{"id":70,"module_id":6,"type":"fill-gap","question":"My ___ name is Asel.","options":"[\"mother\",\"father\",\"son\"]","correct_answer":"mother","explanation":"Asel is a female name, clearly referring to mother here."},{"id":71,"module_id":6,"type":"fill-gap","question":"I have one ___ and one sister.","options":"[\"brother\",\"house\",\"school\"]","correct_answer":"brother","explanation":"One brother."},{"id":72,"module_id":6,"type":"fill-gap","question":"My ___ is 65 years old.","options":"[\"grandfather\",\"son\",\"baby\"]","correct_answer":"grandfather","explanation":"65 years old suggests grandfather."},{"id":73,"module_id":6,"type":"fill-gap","question":"We are a big ___.","options":"[\"family\",\"room\",\"book\"]","correct_answer":"family","explanation":"Big family."},{"id":74,"module_id":6,"type":"fill-gap","question":"My parents have two children: me and my ___.","options":"[\"sister\",\"mother\",\"grandmother\"]","correct_answer":"sister","explanation":"The other child is a sister/brother. Sister is the option."},{"id":75,"module_id":6,"type":"true-false","question":"Grandmother is father's mother.","options":"[\"True\",\"False\"]","correct_answer":"True","explanation":"Yes, father's or mother's mother."},{"id":76,"module_id":6,"type":"true-false","question":"Your sister's brother is your cousin.","options":"[\"True\",\"False\"]","correct_answer":"False","explanation":"Your sister's brother is YOUR brother (or you)."},{"id":77,"module_id":6,"type":"true-false","question":"Parents are mother and father.","options":"[\"True\",\"False\"]","correct_answer":"True","explanation":"Correct."},{"id":78,"module_id":6,"type":"true-false","question":"Your uncle is your mother's brother.","options":"[\"True\",\"False\"]","correct_answer":"True","explanation":"Mother's or Father's brother is an uncle."},{"id":79,"module_id":6,"type":"true-false","question":"A daughter is a male child.","options":"[\"True\",\"False\"]","correct_answer":"False","explanation":"Daughter is a female child. Son is male."},{"id":115,"module_id":8,"type":"text-input","question":"Complete: My ______ is Asel.","options":null,"correct_answer":"name","explanation":"My name is... (–ú–µ–Ω—è –∑–æ–≤—É—Ç...)"},{"id":116,"module_id":8,"type":"text-input","question":"Complete: I ______ 12 years old.","options":null,"correct_answer":"am","explanation":"I am... (–ú–Ω–µ...)"},{"id":117,"module_id":8,"type":"text-input","question":"Complete: I am ______ Kazakhstan.","options":null,"correct_answer":"from","explanation":"I am from... (–Ø –∏–∑...)"},{"id":118,"module_id":8,"type":"text-input","question":"Complete: I ______ a brother.","options":null,"correct_answer":"have","explanation":"I have... (–£ –º–µ–Ω—è –µ—Å—Ç—å...)"},{"id":119,"module_id":8,"type":"text-input","question":"Complete: I ______ football.","options":null,"correct_answer":"like","explanation":"I like... (–ú–Ω–µ –Ω—Ä–∞–≤–∏—Ç—Å—è...)"},{"id":120,"module_id":8,"type":"text-input","question":"Order the words: name / My / is / Daniyar","options":null,"correct_answer":"My name is Daniyar.","explanation":"My name is Daniyar."},{"id":121,"module_id":8,"type":"text-input","question":"Order the words: am / I / old / 11 / years","options":null,"correct_answer":"I am 11 years old.","explanation":"I am 11 years old."},{"id":122,"module_id":8,"type":"text-input","question":"Order the words: from / I / Astana / am","options":null,"correct_answer":"I am from Astana.","explanation":"I am from Astana."},{"id":123,"module_id":8,"type":"text-input","question":"Order the words: a / I / sister / have","options":null,"correct_answer":"I have a sister.","explanation":"I have a sister."},{"id":124,"module_id":8,"type":"text-input","question":"Order the words: cats / like / I","options":null,"correct_answer":"I like cats.","explanation":"I like cats."},{"id":125,"module_id":8,"type":"text-input","question":"Correct the mistake: my name is aruzhan","options":null,"correct_answer":"My name is Aruzhan.","explanation":"Start with capital letter (M) and name (Aruzhan)."},{"id":126,"module_id":8,"type":"text-input","question":"Correct the mistake: i am 10 years old","options":null,"correct_answer":"I am 10 years old.","explanation":"Capital \"I\"."},{"id":127,"module_id":8,"type":"text-input","question":"Correct the mistake: i from almaty","options":null,"correct_answer":"I am from Almaty.","explanation":"I am from Almaty. (Forgot \"am\" and capitals)"},{"id":128,"module_id":8,"type":"text-input","question":"Correct the mistake: i have brother","options":null,"correct_answer":"I have a brother.","explanation":"I have *a* brother."},{"id":129,"module_id":8,"type":"text-input","question":"Correct the mistake: i like football","options":null,"correct_answer":"I like football.","explanation":"Capital \"I\"."}].forEach(e => {
                stmtExercise.run(e.id, e.module_id, e.type, e.question, e.options, e.correct_answer, e.explanation);
            });
            stmtExercise.finalize();

            console.log("‚úÖ Database successfully updated with latest content!");
            resolve();
        });
    });
}

setup().then(() => {
    db.close();
}).catch(err => {
    console.error("‚ùå Error:", err);
    db.close();
});
