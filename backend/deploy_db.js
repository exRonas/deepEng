const sqlite3 = require('sqlite3').verbose();
const path = require('path');
const fs = require('fs');

const dbPath = path.resolve(__dirname, 'db/deepeng.sqlite');

// Ensure db directory exists
const dbDir = path.dirname(dbPath);
if (!fs.existsSync(dbDir)){
    fs.mkdirSync(dbDir, { recursive: true });
}

const db = new sqlite3.Database(dbPath);

console.log("ğŸ”„ Starting Database Deployment...");

db.serialize(() => {
    // 1. Create Tables (Schema)
    db.run(`CREATE TABLE IF NOT EXISTS users (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        username TEXT UNIQUE,
        phone TEXT UNIQUE,
        full_name TEXT,
        password TEXT,
        role TEXT DEFAULT 'student',
        level TEXT DEFAULT 'A1',
        teacher_id INTEGER,
        created_at DATETIME DEFAULT CURRENT_TIMESTAMP
    )`);

    db.run(`CREATE TABLE IF NOT EXISTS modules (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        level TEXT,
        type TEXT,
        title TEXT,
        description TEXT,
        content TEXT
    )`);

    db.run(`CREATE TABLE IF NOT EXISTS exercises (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        module_id INTEGER,
        type TEXT,
        question TEXT,
        options TEXT,
        correct_answer TEXT,
        explanation TEXT,
        FOREIGN KEY(module_id) REFERENCES modules(id)
    )`);

    db.run(`CREATE TABLE IF NOT EXISTS progress (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        user_id INTEGER,
        module_id INTEGER,
        score INTEGER,
        reflection TEXT,
        details TEXT,
        ai_history TEXT,
        completed_at DATETIME DEFAULT CURRENT_TIMESTAMP,
        FOREIGN KEY(user_id) REFERENCES users(id),
        FOREIGN KEY(module_id) REFERENCES modules(id)
    )`);

     db.run(`CREATE TABLE IF NOT EXISTS assignments (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        teacher_id INTEGER,
        module_id INTEGER,
        assigned_at DATETIME DEFAULT CURRENT_TIMESTAMP,
        FOREIGN KEY(teacher_id) REFERENCES users(id),
        FOREIGN KEY(module_id) REFERENCES modules(id)
    )`);
    
    // Ensure unique index exists (run as separate statement in serialize flow)
    db.run(`CREATE UNIQUE INDEX IF NOT EXISTS idx_assignments_teacher_module ON assignments (teacher_id, module_id)`);
    
     db.run(`CREATE TABLE IF NOT EXISTS dictionary (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        user_id INTEGER,
        word TEXT,
        translation TEXT,
        context TEXT,
        added_at DATETIME DEFAULT CURRENT_TIMESTAMP,
        FOREIGN KEY(user_id) REFERENCES users(id)
    )`);


    // 2. Clear Content Tables (Keep Users/Progress/Modules State)
    console.log("ğŸ§¹ Clearing old content data (Modules & Exercises)...");
    
    db.run("DELETE FROM exercises");
    db.run("DELETE FROM modules");
    db.run("DELETE FROM sqlite_sequence WHERE name='modules' OR name='exercises'"); 

    // 3. Insert Modules
    console.log("ğŸ“¦ Insert Modules...");
    const stmtModule = db.prepare("INSERT INTO modules (id, level, type, title, description, content) VALUES (?, ?, ?, ?, ?, ?)");
    [{"id":5,"level":"A1","type":"grammar","title":"Grammar A1: Ğ“Ğ»Ğ°Ğ³Ğ¾Ğ» \"to be\"","description":"Ğ’Ñ‹ÑƒÑ‡Ğ¸ ÑĞ°Ğ¼Ñ‹Ğ¹ Ğ³Ğ»Ğ°Ğ²Ğ½Ñ‹Ğ¹ Ğ³Ğ»Ğ°Ğ³Ğ¾Ğ» Ğ°Ğ½Ğ³Ğ»Ğ¸Ğ¹ÑĞºĞ¾Ğ³Ğ¾ ÑĞ·Ñ‹ĞºĞ°!","content":"{\"theory\":[\"**MINI-LECTURE (ĞĞ±ÑŠÑÑĞ½ĞµĞ½Ğ¸Ğµ)**\",\"**Ğ¢ĞµĞ¼Ğ°**: Ğ“Ğ»Ğ°Ğ³Ğ¾Ğ» TO BE Ğ² Ğ½Ğ°ÑÑ‚Ğ¾ÑÑ‰ĞµĞ¼ Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ¸\",\"**Ğ£Ñ€Ğ¾Ğ²ĞµĞ½ÑŒ**: A1\",\"\",\"**Ğ§Ñ‚Ğ¾ Ñ‚Ğ°ĞºĞ¾Ğµ Ğ³Ğ»Ğ°Ğ³Ğ¾Ğ» TO BE?**\",\"Ğ­Ñ‚Ğ¾ ÑĞ°Ğ¼Ñ‹Ğ¹ Ğ²Ğ°Ğ¶Ğ½Ñ‹Ğ¹ Ğ³Ğ»Ğ°Ğ³Ğ¾Ğ» Ğ² Ğ°Ğ½Ğ³Ğ»Ğ¸Ğ¹ÑĞºĞ¾Ğ¼ ÑĞ·Ñ‹ĞºĞµ. ĞĞ½ Ğ¾Ğ·Ğ½Ğ°Ñ‡Ğ°ĞµÑ‚ \\\"Ğ±Ñ‹Ñ‚ÑŒ\\\", \\\"Ğ½Ğ°Ñ…Ğ¾Ğ´Ğ¸Ñ‚ÑŒÑÑ\\\", \\\"ÑĞ²Ğ»ÑÑ‚ÑŒÑÑ\\\".\",\"\",\"**Ğ¢Ñ€Ğ¸ Ñ„Ğ¾Ñ€Ğ¼Ñ‹ Ğ² Ğ½Ğ°ÑÑ‚Ğ¾ÑÑ‰ĞµĞ¼ Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ¸**:\",\"1. **am** - Ñ ĞµÑÑ‚ÑŒ (Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ñ I)\",\"2. **is** - Ğ¾Ğ½/Ğ¾Ğ½Ğ°/Ğ¾Ğ½Ğ¾ ĞµÑÑ‚ÑŒ (Ñ he, she, it, Ğ¸ Ñ Ğ¾Ğ´Ğ½Ğ¸Ğ¼ Ñ‡ĞµĞ»Ğ¾Ğ²ĞµĞºĞ¾Ğ¼/Ğ¿Ñ€ĞµĞ´Ğ¼ĞµÑ‚Ğ¾Ğ¼)\",\"3. **are** - Ğ¼Ñ‹/Ğ²Ñ‹/Ğ¾Ğ½Ğ¸ ĞµÑÑ‚ÑŒ (Ñ we, you, they, Ğ¸ Ñ Ğ½ĞµÑĞºĞ¾Ğ»ÑŒĞºĞ¸Ğ¼Ğ¸ Ğ»ÑĞ´ÑŒĞ¼Ğ¸/Ğ¿Ñ€ĞµĞ´Ğ¼ĞµÑ‚Ğ°Ğ¼Ğ¸)\",\"\",\"**Ğ¢Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ° Ñ„Ğ¾Ñ€Ğ¼**:\",{\"type\":\"table\",\"headers\":[\"ĞœĞµÑÑ‚Ğ¾Ğ¸Ğ¼ĞµĞ½Ğ¸Ğµ\",\"TO BE\",\"ĞŸĞµÑ€ĞµĞ²Ğ¾Ğ´\",\"ĞŸÑ€Ğ¸Ğ¼ĞµÑ€\"],\"rows\":[[\"I\",\"am\",\"Ğ¯ ĞµÑÑ‚ÑŒ\",\"I am a student.\"],[\"He\",\"is\",\"ĞĞ½ ĞµÑÑ‚ÑŒ\",\"He is my brother.\"],[\"She\",\"is\",\"ĞĞ½Ğ° ĞµÑÑ‚ÑŒ\",\"She is my mother.\"],[\"It\",\"is\",\"ĞĞ½/Ğ¾Ğ½Ğ¾ ĞµÑÑ‚ÑŒ\",\"It is a cat.\"],[\"We\",\"are\",\"ĞœÑ‹ ĞµÑÑ‚ÑŒ\",\"We are friends.\"],[\"You\",\"are\",\"Ğ¢Ñ‹/Ğ’Ñ‹ ĞµÑÑ‚ÑŒ\",\"You are a teacher.\"],[\"They\",\"are\",\"ĞĞ½Ğ¸ ĞµÑÑ‚ÑŒ\",\"They are my parents.\"]]},\"\",\"**ĞšĞ¾Ğ³Ğ´Ğ° Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµĞ¼ TO BE?**\",\"1. ĞŸÑ€ĞµĞ´ÑÑ‚Ğ°Ğ²Ğ»ÑĞµĞ¼ÑÑ: I am Asel.\",\"2. Ğ“Ğ¾Ğ²Ğ¾Ñ€Ğ¸Ğ¼ Ğ¾ Ğ¿Ñ€Ğ¾Ñ„ĞµÑÑĞ¸Ğ¸: She is a doctor.\",\"3. ĞĞ¿Ğ¸ÑÑ‹Ğ²Ğ°ĞµĞ¼: He is tall.\",\"4. Ğ“Ğ¾Ğ²Ğ¾Ñ€Ğ¸Ğ¼ Ğ¾ Ğ²Ğ¾Ğ·Ñ€Ğ°ÑÑ‚Ğµ: I am 12 years old.\",\"5. Ğ“Ğ¾Ğ²Ğ¾Ñ€Ğ¸Ğ¼ Ğ¾ Ğ¼ĞµÑÑ‚Ğµ: We are at school.\",\"\",\"**ĞÑ‚Ñ€Ğ¸Ñ†Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ğ°Ñ Ñ„Ğ¾Ñ€Ğ¼Ğ°**:\",\"ĞŸÑ€Ğ¾ÑÑ‚Ğ¾ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ÑĞµĞ¼ **NOT** Ğ¿Ğ¾ÑĞ»Ğµ am/is/are:\",\"â€¢ I am â†’ I am not (I'm not)\",\"â€¢ He is â†’ He is not (He isn't)\",\"â€¢ They are â†’ They are not (They aren't)\",\"\",\"**Ğ’Ğ¾Ğ¿Ñ€Ğ¾ÑĞ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ°Ñ Ñ„Ğ¾Ñ€Ğ¼Ğ°**:\",\"Ğ¡Ñ‚Ğ°Ğ²Ğ¸Ğ¼ am/is/are **Ğ’ ĞĞĞ§ĞĞ›Ğ** Ğ¿Ñ€ĞµĞ´Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ:\",\"â€¢ You are â†’ Are you...?\",\"â€¢ He is â†’ Is he...?\",\"â€¢ I am â†’ Am I...?\",\"\",\"**Ğ¡Ğ¾ĞºÑ€Ğ°Ñ‰Ñ‘Ğ½Ğ½Ñ‹Ğµ Ñ„Ğ¾Ñ€Ğ¼Ñ‹**:\",\"â€¢ I'm, He's, She's, It's, We're, You're, They're\",\"â€¢ isn't, aren't (am not Ğ½Ğµ ÑĞ¾ĞºÑ€Ğ°Ñ‰Ğ°ĞµÑ‚ÑÑ!)\"],\"ai_task\":{\"prompt\":\"ĞĞ°Ğ¶Ğ¼Ğ¸ 'Talk to AI'. \\n\\nĞ—Ğ°Ğ´Ğ°Ğ½Ğ¸Ğµ 1: Ğ¡ĞºĞ°Ğ¶Ğ¸ 3 Ğ¿Ñ€ĞµĞ´Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ Ğ¾ ÑĞµĞ±Ğµ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒÑ 'am' (I am...). \\nĞ—Ğ°Ğ´Ğ°Ğ½Ğ¸Ğµ 2: Ğ—Ğ°Ğ´Ğ°Ğ¹ Ğ˜Ğ˜ 3 Ğ²Ğ¾Ğ¿Ñ€Ğ¾ÑĞ° (Are you...? Is English...?).\",\"system_message\":\"You are a friendly English tutor. The student is learning 'to be' (am, is, are). \\n\\n1. Encourage the student to say sentences about themselves starting with 'I am'. Correct them gently if they miss 'am'.\\n2. Then ask the student to ask YOU questions. Answer simply.\\n3. Finally, ask yes/no questions like 'Are you a student?', 'Is your room big?' to practice short answers.\"},\"reflection\":[\"What was easy? (am/is/are, positive sentences, questions?)\",\"What was difficult? (When to use which form?)\",\"Can you use these sentences now? (I am..., He is..., Are you...?)\",\"How do you feel about 'to be'? (Easy, Needs practice, Confusing)\"]}"},{"id":6,"level":"A1","type":"vocabulary","title":"My Family","description":"Basic Family Members","content":"{\"theory\":[\"**MINI-LECTURE (ĞĞ±ÑŠÑÑĞ½ĞµĞ½Ğ¸Ğµ)**\",\"**Ğ¢ĞµĞ¼Ğ°**: Basic Family Members\",\"**Ğ£Ñ€Ğ¾Ğ²ĞµĞ½ÑŒ**: A1\",\"\",\"**Useful Phrases (ĞŸĞ¾Ğ»ĞµĞ·Ğ½Ñ‹Ğµ Ñ„Ñ€Ğ°Ğ·Ñ‹)**:\",\"â€¢ \\\"I have...\\\" (Ğ£ Ğ¼ĞµĞ½Ñ ĞµÑÑ‚ÑŒ...)\",\"â€¢ \\\"My ...'s name is...\\\" (ĞœĞ¾ĞµĞ³Ğ¾ ... Ğ·Ğ¾Ğ²ÑƒÑ‚...)\",\"â€¢ \\\"We live together.\\\" (ĞœÑ‹ Ğ¶Ğ¸Ğ²ĞµĞ¼ Ğ²Ğ¼ĞµÑÑ‚Ğµ.)\",\"\",\"**New Words (10 ÑĞ»Ğ¾Ğ²)**:\",\"1. **mother** - (Ğ¼Ğ°Ğ¼Ğ°) â€“ the woman who is your parent\",\"2. **father** - (Ğ¿Ğ°Ğ¿Ğ°) â€“ the man who is your parent\",\"3. **sister** - (ÑĞµÑÑ‚Ñ€Ğ°) â€“ a girl in your family\",\"4. **brother** - (Ğ±Ñ€Ğ°Ñ‚) â€“ a boy in your family\",\"5. **grandmother** - (Ğ±Ğ°Ğ±ÑƒÑˆĞºĞ°) â€“ your motherâ€™s or fatherâ€™s mother\",\"6. **grandfather** - (Ğ´ĞµĞ´ÑƒÑˆĞºĞ°) â€“ your motherâ€™s or fatherâ€™s father\",\"7. **family** - (ÑĞµĞ¼ÑŒÑ) â€“ people in one family\",\"8. **parents** - (Ñ€Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»Ğ¸) â€“ a mother and a father\",\"9. **son** - (ÑÑ‹Ğ½) â€“ a child who is a boy\",\"10. **daughter** - (Ğ´Ğ¾Ñ‡ÑŒ) â€“ a child who is a girl\",\"\",\"**Simple Explanations**:\",\"These words are for people in your family. We use them every day when we talk about our home.\",\"\",\"**Examples**:\",\"1. \\\"My mother's name is Aigul.\\\"\",\"2. \\\"I have one brother and two sisters.\\\"\",\"3. \\\"My grandfather is 70 years old.\\\"\",\"4. \\\"We are a big family.\\\"\",\"\",\"**ĞŸĞĞœĞ•Ğ¢ĞšĞ: â€™s = Ğ§Ğ¬Ğ Ğ­Ğ¢Ğ?**\",\"ĞšĞ¾Ğ³Ğ´Ğ° Ğ¼Ñ‹ Ñ…Ğ¾Ñ‚Ğ¸Ğ¼ ÑĞºĞ°Ğ·Ğ°Ñ‚ÑŒ, Ñ‡Ñ‚Ğ¾ ÑÑ‚Ğ¾ Ğ§Ğ¬Ğ-Ğ¢Ğ (ÑÑ‚Ğ¾ Ğ½Ğ°ÑˆĞµ / ĞµĞ³Ğ¾ / ĞµÑ‘), Ğ¼Ñ‹ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµĞ¼ **â€™s**.\",\"ĞŸÑ€Ğ¸Ğ¼ĞµÑ€: Tomâ€™s bag â€“ ÑÑƒĞ¼ĞºĞ° Ğ¢Ğ¾Ğ¼Ğ°\",\"Ğ’Ğ¾Ğ¿Ñ€Ğ¾Ñ: Whose book? (Ğ§ÑŒÑ ĞºĞ½Ğ¸Ğ³Ğ°?)\",\"ĞÑ‚Ğ²ĞµÑ‚: Annaâ€™s book.\",\"**Ğ’Ğ°Ğ¶Ğ½Ğ¾**:\",\"â€¢ â€™s = Ğ¿Ñ€Ğ¸Ğ½Ğ°Ğ´Ğ»ĞµĞ¶Ğ¸Ñ‚\",\"â€¢ ÑÑ‚Ğ°Ğ²Ğ¸Ğ¼ â€™s Ğ¿Ğ¾ÑĞ»Ğµ Ñ‡ĞµĞ»Ğ¾Ğ²ĞµĞºĞ°\"],\"ai_task\":{\"prompt\":\"Click 'Talk to AI'. Tell AI about your family. Use at least 5 words from the lesson.\",\"system_message\":\"You are a friendly English tutor. The student is learning family members (mother, father, brother, sister...). \\n\\nGoal: Help the student talk about their family using the new words.\\n\\n1. Ask: 'Tell me about your family. '.\\n2. If they make mistakes, correct them gently. \\n3. Ask follow up questions: 'What is your mother's name?', 'How old is your brother?'.\\n4. If they struggle, give them a definition and ask for the word (e.g. 'Who is your father's father?').\"},\"reflection\":[\"What was easy? (Multiple choice, Matching, Fill in gaps?)\",\"What was difficult? (New words, Making sentences, Grammar?)\",\"How do you feel about this lesson? (Happy, OK, Need help)\",\"Which words will you use tomorrow?\"]}"},{"id":7,"level":"A1","type":"reading","title":"Reading A1: Ğ¢ĞµĞºÑÑ‚ \"ĞœĞ¾Ñ Ğ¡ĞµĞ¼ÑŒÑ\"","description":"ĞŸÑ€Ğ¾Ñ‡Ğ¸Ñ‚Ğ°Ğ¹ Ñ‚ĞµĞºÑÑ‚ Ğ¿Ñ€Ğ¾ ĞĞ¹ÑÑƒĞ»Ñƒ Ğ¸ ĞµÑ‘ ÑĞµĞ¼ÑŒÑ.","content":"{\"theory\":[\"**MINI-LECTURE (ĞĞ±ÑŠÑÑĞ½ĞµĞ½Ğ¸Ğµ)**\",\"**Ğ¢ĞµĞ¼Ğ°**: Ğ§Ñ‚ĞµĞ½Ğ¸Ğµ Ğ¿Ñ€Ğ¾ÑÑ‚Ñ‹Ñ… Ñ‚ĞµĞºÑÑ‚Ğ¾Ğ² Ğ¾ ÑĞµĞ¼ÑŒĞµ\",\"\",\"**Ğ§Ñ‚Ğ¾ Ñ‚Ğ°ĞºĞ¾Ğµ Reading?**\",\"Reading - ÑÑ‚Ğ¾ Ñ‡Ñ‚ĞµĞ½Ğ¸Ğµ Ğ¸ Ğ¿Ğ¾Ğ½Ğ¸Ğ¼Ğ°Ğ½Ğ¸Ğµ Ñ‚ĞµĞºÑÑ‚Ğ¾Ğ² Ğ½Ğ° Ğ°Ğ½Ğ³Ğ»Ğ¸Ğ¹ÑĞºĞ¾Ğ¼ ÑĞ·Ñ‹ĞºĞµ. ĞœÑ‹ Ñ‡Ğ¸Ñ‚Ğ°ĞµĞ¼, Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ ÑƒĞ·Ğ½Ğ°Ñ‚ÑŒ Ğ½Ğ¾Ğ²ÑƒÑ Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ, Ğ½Ğ°Ğ¹Ñ‚Ğ¸ Ğ¾Ñ‚Ğ²ĞµÑ‚Ñ‹ Ğ½Ğ° Ğ²Ğ¾Ğ¿Ñ€Ğ¾ÑÑ‹ Ğ¸ Ğ¿Ğ¾Ğ½ÑÑ‚ÑŒ, Ğ¾ Ñ‡Ñ‘Ğ¼ Ñ‚ĞµĞºÑÑ‚.\",\"\",\"**Ğ¡Ñ‚Ñ€Ğ°Ñ‚ĞµĞ³Ğ¸Ğ¸ Ñ‡Ñ‚ĞµĞ½Ğ¸Ñ Ğ´Ğ»Ñ Ğ½Ğ°Ñ‡Ğ¸Ğ½Ğ°ÑÑ‰Ğ¸Ñ…**:\",\"1. **Ğ¡Ğ¼Ğ¾Ñ‚Ñ€Ğ¸ Ğ½Ğ° ĞºĞ°Ñ€Ñ‚Ğ¸Ğ½ĞºĞ¸** - Ğ¾Ğ½Ğ¸ Ğ¿Ğ¾Ğ¼Ğ¾Ğ³Ğ°ÑÑ‚ Ğ¿Ğ¾Ğ½ÑÑ‚ÑŒ Ñ‚ĞµĞºÑÑ‚\",\"2. **Ğ˜Ñ‰Ğ¸ Ğ·Ğ½Ğ°ĞºĞ¾Ğ¼Ñ‹Ğµ ÑĞ»Ğ¾Ğ²Ğ°** - ÑĞ»Ğ¾Ğ²Ğ°, ĞºĞ¾Ñ‚Ğ¾Ñ€Ñ‹Ğµ Ñ‚Ñ‹ ÑƒĞ¶Ğµ Ğ·Ğ½Ğ°ĞµÑˆÑŒ\",\"3. **ĞĞµ Ğ¿ĞµÑ€ĞµĞ²Ğ¾Ğ´Ğ¸ ĞºĞ°Ğ¶Ğ´Ğ¾Ğµ ÑĞ»Ğ¾Ğ²Ğ¾** - Ğ¿Ñ‹Ñ‚Ğ°Ğ¹ÑÑ Ğ¿Ğ¾Ğ½ÑÑ‚ÑŒ Ğ¾Ğ±Ñ‰Ğ¸Ğ¹ ÑĞ¼Ñ‹ÑĞ»\",\"4. **Ğ§Ğ¸Ñ‚Ğ°Ğ¹ Ğ²ÑĞ»ÑƒÑ…** - ÑÑ‚Ğ¾ Ğ¿Ğ¾Ğ¼Ğ¾Ğ³Ğ°ĞµÑ‚ Ñ Ğ¿Ñ€Ğ¾Ğ¸Ğ·Ğ½Ğ¾ÑˆĞµĞ½Ğ¸ĞµĞ¼\",\"\",\"**ĞŸĞ¾Ğ»ĞµĞ·Ğ½Ñ‹Ğµ Ñ„Ñ€Ğ°Ğ·Ñ‹ Ğ´Ğ»Ñ Ñ‡Ñ‚ĞµĞ½Ğ¸Ñ**:\",\"â€¢ I think... - Ğ¯ Ğ´ÑƒĞ¼Ğ°Ñ...\",\"â€¢ In the text... - Ğ’ Ñ‚ĞµĞºÑÑ‚Ğµ...\",\"â€¢ The text says... - Ğ’ Ñ‚ĞµĞºÑÑ‚Ğµ Ğ³Ğ¾Ğ²Ğ¾Ñ€Ğ¸Ñ‚ÑÑ...\",\"â€¢ I don't understand... - Ğ¯ Ğ½Ğµ Ğ¿Ğ¾Ğ½Ğ¸Ğ¼Ğ°Ñ...\",\"\",\"**ĞĞ¾Ğ²Ñ‹Ğµ ÑĞ»Ğ¾Ğ²Ğ° Ğ´Ğ»Ñ ÑÑ‚Ğ¾Ğ³Ğ¾ ÑƒÑ€Ğ¾ĞºĞ°**:\",\"1. **live** - Ğ¶Ğ¸Ñ‚ÑŒ\",\"2. **with** - Ñ\",\"3. **house** - Ğ´Ğ¾Ğ¼\",\"4. **pet** - Ğ´Ğ¾Ğ¼Ğ°ÑˆĞ½ĞµĞµ Ğ¶Ğ¸Ğ²Ğ¾Ñ‚Ğ½Ğ¾Ğµ\",\"5. **like** - Ğ½Ñ€Ğ°Ğ²Ğ¸Ñ‚ÑŒÑÑ\",\"6. **play** - Ğ¸Ğ³Ñ€Ğ°Ñ‚ÑŒ\",\"7. **together** - Ğ²Ğ¼ĞµÑÑ‚Ğµ\"],\"text\":\"Hello! My name is Aisulu. I am 11 years old. I live in Almaty with my family.\\nWe are a big family. I have a mother, a father, one brother and one sister. My mother's name is Aigul. She is a teacher. My father's name is Daniyar. He is a doctor.\\nMy brother is 13 years old. His name is Arman. My sister is 8 years old. Her name is Aruzhan.\\nWe have a cat. Its name is Tom. I like my cat. We play together.\\nI love my family!\",\"translation\":\"ĞŸÑ€Ğ¸Ğ²ĞµÑ‚! ĞœĞµĞ½Ñ Ğ·Ğ¾Ğ²ÑƒÑ‚ ĞĞ¹ÑÑƒĞ»Ñƒ. ĞœĞ½Ğµ 11 Ğ»ĞµÑ‚. Ğ¯ Ğ¶Ğ¸Ğ²Ñƒ Ğ² ĞĞ»Ğ¼Ğ°Ñ‚Ñ‹ Ñ Ğ¼Ğ¾ĞµĞ¹ ÑĞµĞ¼ÑŒĞµĞ¹.\\nĞœÑ‹ Ğ±Ğ¾Ğ»ÑŒÑˆĞ°Ñ ÑĞµĞ¼ÑŒÑ. Ğ£ Ğ¼ĞµĞ½Ñ ĞµÑÑ‚ÑŒ Ğ¼Ğ°Ğ¼Ğ°, Ğ¿Ğ°Ğ¿Ğ°, Ğ¾Ğ´Ğ¸Ğ½ Ğ±Ñ€Ğ°Ñ‚ Ğ¸ Ğ¾Ğ´Ğ½Ğ° ÑĞµÑÑ‚Ñ€Ğ°. Ğ˜Ğ¼Ñ Ğ¼Ğ¾ĞµĞ¹ Ğ¼Ğ°Ğ¼Ñ‹ - ĞĞ¹Ğ³ÑƒĞ»ÑŒ. ĞĞ½Ğ° ÑƒÑ‡Ğ¸Ñ‚ĞµĞ»ÑŒ. Ğ˜Ğ¼Ñ Ğ¼Ğ¾ĞµĞ³Ğ¾ Ğ¿Ğ°Ğ¿Ñ‹ - Ğ”Ğ°Ğ½Ğ¸ÑÑ€. ĞĞ½ Ğ²Ñ€Ğ°Ñ‡.\\nĞœĞ¾ĞµĞ¼Ñƒ Ğ±Ñ€Ğ°Ñ‚Ñƒ 13 Ğ»ĞµÑ‚. Ğ•Ğ³Ğ¾ Ğ·Ğ¾Ğ²ÑƒÑ‚ ĞÑ€Ğ¼Ğ°Ğ½. ĞœĞ¾ĞµĞ¹ ÑĞµÑÑ‚Ñ€Ğµ 8 Ğ»ĞµÑ‚. Ğ•Ğµ Ğ·Ğ¾Ğ²ÑƒÑ‚ ĞÑ€ÑƒĞ¶Ğ°Ğ½.\\nĞ£ Ğ½Ğ°Ñ ĞµÑÑ‚ÑŒ ĞºĞ¾Ñ‚. Ğ•Ğ³Ğ¾ Ğ·Ğ¾Ğ²ÑƒÑ‚ Ğ¢Ğ¾Ğ¼. ĞœĞ½Ğµ Ğ½Ñ€Ğ°Ğ²Ğ¸Ñ‚ÑÑ Ğ¼Ğ¾Ğ¹ ĞºĞ¾Ñ‚. ĞœÑ‹ Ğ¸Ğ³Ñ€Ğ°ĞµĞ¼ Ğ²Ğ¼ĞµÑÑ‚Ğµ.\\nĞ¯ Ğ»ÑĞ±Ğ»Ñ ÑĞ²Ğ¾Ñ ÑĞµĞ¼ÑŒÑ!\",\"image\":\"/pronounce/a1/reading/photo_2026-01-09_13-40-24.jpg\",\"ai_task\":{\"prompt\":\"ĞĞ°Ğ¶Ğ¼Ğ¸ 'Talk to AI'. Ğ˜Ğ˜ Ğ·Ğ°Ğ´Ğ°ÑÑ‚ Ñ‚ĞµĞ±Ğµ Ğ²Ğ¾Ğ¿Ñ€Ğ¾ÑÑ‹ Ğ¿Ğ¾ Ñ‚ĞµĞºÑÑ‚Ñƒ (Ğ½Ğ°Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€ 'What is the girl's name?'). Ğ—Ğ°Ñ‚ĞµĞ¼ Ñ€Ğ°ÑÑĞºĞ°Ğ¶Ğ¸ Ğ˜Ğ˜ Ğ¾ ÑĞ²Ğ¾ĞµĞ¹ ÑĞµĞ¼ÑŒĞµ (ÑĞºĞ¾Ğ»ÑŒĞºĞ¾ Ñ‡ĞµĞ»Ğ¾Ğ²ĞµĞº, ĞµÑÑ‚ÑŒ Ğ»Ğ¸ Ğ¶Ğ¸Ğ²Ğ¾Ñ‚Ğ½Ñ‹Ğµ).\",\"system_message\":\"You are a friendly English tutor for A1 level students. The student just read a text about Aisulu's family. \\n\\nTask 1: Ask 3 simple comprehension questions about the text (e.g., 'Where does Aisulu live?', 'Who is Arman?', 'What pet do they have?'). Wait for the student's answer after each question.\\n\\nTask 2: Ask the student about THEIR family. 'How big is your family?', 'Do you have brothers or sisters?', 'Do you have a pet?'.\\n\\nTask 3: Ask a prediction question: 'What do you think Aisulu will do tomorrow?'.\\n\\nKeep your language very simple (A1). Correct major mistakes gently.\"},\"reflection\":[\"What was easy in this reading? (Understanding names, ages, family words?)\",\"What was difficult? (New words, sentences, answering questions?)\",\"How much did you understand? (Everything, Most, Some, Little)\",\"Did you learn the new words? (live, with, house, pet, like, play, together)\"]}"},{"id":8,"level":"A1","type":"writing","title":"About Me","description":"Writing simple sentences about yourself","content":"{\"theory\":[\"**MINI-LECTURE (ĞĞ±ÑŠÑÑĞ½ĞµĞ½Ğ¸Ğµ)**\",\"**Ğ¢ĞµĞ¼Ğ°**: ĞĞ°Ğ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ Ğ¿Ñ€Ğ¾ÑÑ‚Ñ‹Ñ… Ğ¿Ñ€ĞµĞ´Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğ¹ Ğ¾ ÑĞµĞ±Ğµ\",\"**Ğ£Ñ€Ğ¾Ğ²ĞµĞ½ÑŒ**: A1\",\"\",\"**Ğ§Ñ‚Ğ¾ Ñ‚Ğ°ĞºĞ¾Ğµ Writing?**\",\"Writing - ÑÑ‚Ğ¾ ÑƒĞ¼ĞµĞ½Ğ¸Ğµ Ğ¿Ğ¸ÑĞ°Ñ‚ÑŒ Ğ½Ğ° Ğ°Ğ½Ğ³Ğ»Ğ¸Ğ¹ÑĞºĞ¾Ğ¼ ÑĞ·Ñ‹ĞºĞµ. ĞĞ° ÑƒÑ€Ğ¾Ğ²Ğ½Ğµ A1 Ğ¼Ñ‹ ÑƒÑ‡Ğ¸Ğ¼ÑÑ:\",\"1. ĞŸĞ¸ÑĞ°Ñ‚ÑŒ ÑĞ»Ğ¾Ğ²Ğ° Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ğ¾ (spelling)\",\"2. Ğ¡Ğ¾ÑÑ‚Ğ°Ğ²Ğ»ÑÑ‚ÑŒ Ğ¿Ñ€Ğ¾ÑÑ‚Ñ‹Ğµ Ğ¿Ñ€ĞµĞ´Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ\",\"3. Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ·Ğ°Ğ³Ğ»Ğ°Ğ²Ğ½Ñ‹Ğµ Ğ±ÑƒĞºĞ²Ñ‹ Ğ¸ Ñ‚Ğ¾Ñ‡ĞºĞ¸\",\"4. ĞÑ‚Ğ²ĞµÑ‡Ğ°Ñ‚ÑŒ Ğ½Ğ° Ğ¿Ñ€Ğ¾ÑÑ‚Ñ‹Ğµ Ğ²Ğ¾Ğ¿Ñ€Ğ¾ÑÑ‹\",\"\",\"**ĞÑĞ½Ğ¾Ğ²Ğ½Ñ‹Ğµ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»Ğ° Ğ¿Ğ¸ÑÑŒĞ¼Ğ° Ğ´Ğ»Ñ Ğ½Ğ°Ñ‡Ğ¸Ğ½Ğ°ÑÑ‰Ğ¸Ñ…**:\",\"1. ĞĞ°Ñ‡Ğ¸Ğ½Ğ°Ğ¹ Ğ¿Ñ€ĞµĞ´Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ Ñ Ğ·Ğ°Ğ³Ğ»Ğ°Ğ²Ğ½Ğ¾Ğ¹ Ğ±ÑƒĞºĞ²Ñ‹\",\"2. Ğ—Ğ°ĞºĞ°Ğ½Ñ‡Ğ¸Ğ²Ğ°Ğ¹ Ğ¿Ñ€ĞµĞ´Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ Ñ‚Ğ¾Ñ‡ĞºĞ¾Ğ¹ (.)\",\"3. ĞŸĞ¸ÑˆĞ¸ ÑĞ»Ğ¾Ğ²Ğ° Ñ Ğ¿Ñ€Ğ¾Ğ±ĞµĞ»Ğ°Ğ¼Ğ¸ Ğ¼ĞµĞ¶Ğ´Ñƒ Ğ½Ğ¸Ğ¼Ğ¸\",\"4. ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞ¹ Ğ½Ğ°Ğ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ ÑĞ»Ğ¾Ğ²\",\"\",\"**Word Bank (Ğ‘Ğ°Ğ½Ğº ÑĞ»Ğ¾Ğ² Ğ´Ğ»Ñ Ğ¿Ğ¸ÑÑŒĞ¼Ğ°)**:\",\"**Ğ“Ğ¾Ñ€Ğ¾Ğ´Ğ°**: Almaty, Astana (Nur-Sultan), Shymkent, Aktobe, Karaganda, Aktau, Atyrau\",\"**Ğ¡ĞµĞ¼ÑŒÑ**: brother, sister, mother, father, parents, grandmother, grandfather\",\"**Ğ¥Ğ¾Ğ±Ğ±Ğ¸**: football, basketball, drawing, singing, dancing, reading, music, games\",\"**Ğ–Ğ¸Ğ²Ğ¾Ñ‚Ğ½Ñ‹Ğµ**: dog, cat, fish, hamster, bird\",\"\",\"**Ğ¨Ğ°Ğ±Ğ»Ğ¾Ğ½Ñ‹ Ğ´Ğ»Ñ ÑÑ‚Ğ¾Ğ³Ğ¾ ÑƒÑ€Ğ¾ĞºĞ°**:\",\"1. My name is ______. (ĞœĞµĞ½Ñ Ğ·Ğ¾Ğ²ÑƒÑ‚ ______.)\",\"2. I am ______ years old. (ĞœĞ½Ğµ ______ Ğ»ĞµÑ‚.)\",\"3. I am from ______. (Ğ¯ Ğ¸Ğ· ______.)\",\"4. I have a ______. (Ğ£ Ğ¼ĞµĞ½Ñ ĞµÑÑ‚ÑŒ ______.)\",\"5. I like ______. (ĞœĞ½Ğµ Ğ½Ñ€Ğ°Ğ²Ğ¸Ñ‚ÑÑ ______.)\"],\"ai_task\":{\"prompt\":\"Ğ—Ğ°Ğ´Ğ°Ğ½Ğ¸Ğµ: ĞĞ°Ğ¿Ğ¸ÑˆĞ¸ 5 Ğ¿Ñ€ĞµĞ´Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğ¹ Ğ¾ ÑĞµĞ±Ğµ. Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹ ÑˆĞ°Ğ±Ğ»Ğ¾Ğ½Ñ‹:\\n1. My name is...\\n2. I am ... years old.\\n3. I am from...\\n4. I have ...\\n5. I like ...\\n\\nĞĞ°Ğ¶Ğ¼Ğ¸ 'Talk to AI' Ğ¸ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²ÑŒ ÑĞ²Ğ¾Ğ¹ Ñ‚ĞµĞºÑÑ‚. Ğ˜Ğ˜ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ Ğ¾ÑˆĞ¸Ğ±ĞºĞ¸.\",\"system_message\":\"You are a helpful English writing tutor. The student will send you a short text about themselves (5 sentences). \\n\\n1. Check for capitalization (start of sentence, names, 'I').\\n2. Check for punctuation (periods).\\n3. Check for specific grammar points: 'I am', 'My name is', 'I have a...', 'I like...'.\\n4. If the text is good, say 'Great job!' and ask a follow-up question like 'What is your brother's name?' or 'What do you like to draw?'. \\n5. If there are mistakes, kindly point them out: 'Don't forget the capital letter for 'I'.' or 'Remember to put a period.'.\"},\"reflection\":[\"What was easy in this writing? (Writing name, age, family, likes?)\",\"What was difficult? (Spelling, Capital letters, 'am/is/are'?)\",\"How do you feel about your writing now? (Confident, OK, Still difficult)\",\"What will you remember for next time? (Capital letters, Dots, Spelling)\"]}"}].forEach(m => {
        stmtModule.run(m.id, m.level, m.type, m.title, m.description, m.content);
    });
    stmtModule.finalize();

    // 4. Insert Exercises
    console.log("ğŸ“ Insert Exercises...");
    const stmtExercise = db.prepare("INSERT INTO exercises (id, module_id, type, question, options, correct_answer, explanation) VALUES (?, ?, ?, ?, ?, ?, ?)");
    [{"id":19,"module_id":7,"type":"true-false","question":"Aisulu is 12 years old.","options":"[\"True\",\"False\"]","correct_answer":"False","explanation":"She is 11 years old."},{"id":20,"module_id":7,"type":"true-false","question":"She has one brother and one sister.","options":"[\"True\",\"False\"]","correct_answer":"True","explanation":"Correct. One brother (Arman) and one sister (Aruzhan)."},{"id":21,"module_id":7,"type":"true-false","question":"Her mother is a doctor.","options":"[\"True\",\"False\"]","correct_answer":"False","explanation":"Her mother is a teacher. Her father is a doctor."},{"id":22,"module_id":7,"type":"true-false","question":"They have a dog.","options":"[\"True\",\"False\"]","correct_answer":"False","explanation":"They have a cat named Tom."},{"id":23,"module_id":7,"type":"true-false","question":"She loves her family.","options":"[\"True\",\"False\"]","correct_answer":"True","explanation":"Text says: \"I love my family!\""},{"id":24,"module_id":7,"type":"multiple-choice","question":"Where does Aisulu live?","options":"[\"Astana\",\"Almaty\",\"Shymkent\",\"Aktobe\"]","correct_answer":"Almaty","explanation":"Text says: \"I live in Almaty...\""},{"id":25,"module_id":7,"type":"multiple-choice","question":"How old is her brother?","options":"[\"11\",\"13\",\"8\",\"10\"]","correct_answer":"13","explanation":"Text says: \"My brother is 13 years old.\""},{"id":26,"module_id":7,"type":"multiple-choice","question":"What is her pet's name?","options":"[\"Max\",\"Tom\",\"Kitty\",\"Barsik\"]","correct_answer":"Tom","explanation":"Text says: \"We have a cat. Its name is Tom.\""},{"id":27,"module_id":7,"type":"multiple-choice","question":"What does her father do?","options":"[\"teacher\",\"driver\",\"doctor\",\"student\"]","correct_answer":"doctor","explanation":"Text says: \"My father's name is Daniyar. He is a doctor.\""},{"id":28,"module_id":7,"type":"multiple-choice","question":"How many people are in her family?","options":"[\"3\",\"4\",\"5\",\"6\"]","correct_answer":"5","explanation":"Mother, Father, Brother, Sister, Aisulu = 5."},{"id":29,"module_id":7,"type":"multiple-choice","question":"Who fits this description: \"13 years old, name Arman\"?","options":"[\"Aisulu\",\"Mother\",\"Father\",\"Brother\",\"Sister\"]","correct_answer":"Brother","explanation":"Arman is the brother."},{"id":30,"module_id":7,"type":"multiple-choice","question":"Who fits this description: \"8 years old, name Aruzhan\"?","options":"[\"Aisulu\",\"Mother\",\"Father\",\"Brother\",\"Sister\"]","correct_answer":"Sister","explanation":"Aruzhan is the sister."},{"id":31,"module_id":7,"type":"multiple-choice","question":"Who fits this description: \"11 years old, likes cat\"?","options":"[\"Aisulu\",\"Mother\",\"Father\",\"Brother\",\"Sister\"]","correct_answer":"Aisulu","explanation":"This describes the narrator, Aisulu."},{"id":32,"module_id":7,"type":"multiple-choice","question":"Who fits this description: \"doctor, name Daniyar\"?","options":"[\"Aisulu\",\"Mother\",\"Father\",\"Brother\",\"Sister\"]","correct_answer":"Father","explanation":"Daniyar is the father."},{"id":33,"module_id":7,"type":"multiple-choice","question":"Who fits this description: \"teacher, name Aigul\"?","options":"[\"Aisulu\",\"Mother\",\"Father\",\"Brother\",\"Sister\"]","correct_answer":"Mother","explanation":"Aigul is the mother."},{"id":34,"module_id":7,"type":"fill-gap","question":"Aisulu lives in ______.","options":"[\"Astana\",\"Almaty\",\"Moscow\"]","correct_answer":"Almaty","explanation":"She lives in Almaty."},{"id":35,"module_id":7,"type":"fill-gap","question":"She has one ______ and one sister.","options":"[\"friend\",\"brother\",\"uncle\"]","correct_answer":"brother","explanation":"She has one brother."},{"id":36,"module_id":7,"type":"fill-gap","question":"Her mother is a ______.","options":"[\"doctor\",\"teacher\",\"driver\"]","correct_answer":"teacher","explanation":"Her mother is a teacher."},{"id":37,"module_id":7,"type":"fill-gap","question":"Their pet is a ______.","options":"[\"dog\",\"cat\",\"bird\"]","correct_answer":"cat","explanation":"They have a cat."},{"id":38,"module_id":7,"type":"fill-gap","question":"The cat's name is ______.","options":"[\"Tom\",\"Jerry\",\"Simba\"]","correct_answer":"Tom","explanation":"The cat is named Tom."},{"id":39,"module_id":5,"type":"multiple-choice","question":"I ___ from Kazakhstan.","options":"[\"am\",\"is\",\"are\",\"be\"]","correct_answer":"am","explanation":"I am (Ğ’ÑĞµĞ³Ğ´Ğ° Ñ I)."},{"id":40,"module_id":5,"type":"multiple-choice","question":"My sister ___ 10 years old.","options":"[\"am\",\"is\",\"are\",\"be\"]","correct_answer":"is","explanation":"My sister = She. She is."},{"id":41,"module_id":5,"type":"multiple-choice","question":"We ___ students.","options":"[\"am\",\"is\",\"are\",\"be\"]","correct_answer":"are","explanation":"We are (ĞœĞ½Ğ¾Ğ¶ĞµÑÑ‚Ğ²ĞµĞ½Ğ½Ğ¾Ğµ Ñ‡Ğ¸ÑĞ»Ğ¾)."},{"id":42,"module_id":5,"type":"multiple-choice","question":"It ___ a big house.","options":"[\"am\",\"is\",\"are\",\"be\"]","correct_answer":"is","explanation":"It is (Ğ•Ğ´Ğ¸Ğ½ÑÑ‚Ğ²ĞµĞ½Ğ½Ğ¾Ğµ Ñ‡Ğ¸ÑĞ»Ğ¾, Ğ½ĞµĞ¾Ğ´ÑƒÑˆĞµĞ²Ğ»ĞµĞ½Ğ½Ğ¾Ğµ)."},{"id":43,"module_id":5,"type":"multiple-choice","question":"They ___ my friends.","options":"[\"am\",\"is\",\"are\",\"be\"]","correct_answer":"are","explanation":"They are (ĞœĞ½Ğ¾Ğ¶ĞµÑÑ‚Ğ²ĞµĞ½Ğ½Ğ¾Ğµ Ñ‡Ğ¸ÑĞ»Ğ¾)."},{"id":44,"module_id":5,"type":"multiple-choice","question":"ĞšĞ°ĞºĞ°Ñ Ñ„Ğ¾Ñ€Ğ¼Ğ° Ğ³Ğ»Ğ°Ğ³Ğ¾Ğ»Ğ° Ğ¿Ğ¾Ğ´Ñ…Ğ¾Ğ´Ğ¸Ñ‚ Ğ´Ğ»Ñ \"I\"?","options":"[\"am\",\"is\",\"are\"]","correct_answer":"am","explanation":"I am."},{"id":45,"module_id":5,"type":"multiple-choice","question":"ĞšĞ°ĞºĞ°Ñ Ñ„Ğ¾Ñ€Ğ¼Ğ° Ğ³Ğ»Ğ°Ğ³Ğ¾Ğ»Ğ° Ğ¿Ğ¾Ğ´Ñ…Ğ¾Ğ´Ğ¸Ñ‚ Ğ´Ğ»Ñ \"He, She, It\"?","options":"[\"am\",\"is\",\"are\"]","correct_answer":"is","explanation":"He is, She is, It is."},{"id":46,"module_id":5,"type":"multiple-choice","question":"ĞšĞ°ĞºĞ°Ñ Ñ„Ğ¾Ñ€Ğ¼Ğ° Ğ³Ğ»Ğ°Ğ³Ğ¾Ğ»Ğ° Ğ¿Ğ¾Ğ´Ñ…Ğ¾Ğ´Ğ¸Ñ‚ Ğ´Ğ»Ñ \"We, You, They\"?","options":"[\"am\",\"is\",\"are\"]","correct_answer":"are","explanation":"We are, You are, They are."},{"id":47,"module_id":5,"type":"fill-gap","question":"My name ___ Daniyar.","options":"[\"am\",\"is\",\"are\"]","correct_answer":"is","explanation":"My name = It (or substitute He/She). It is Daniyar."},{"id":48,"module_id":5,"type":"fill-gap","question":"I ___ 11 years old.","options":"[\"am\",\"is\",\"are\"]","correct_answer":"am","explanation":"I am."},{"id":49,"module_id":5,"type":"fill-gap","question":"My parents ___ teachers.","options":"[\"am\",\"is\",\"are\"]","correct_answer":"are","explanation":"My parents = They. They are."},{"id":50,"module_id":5,"type":"fill-gap","question":"She ___ my best friend.","options":"[\"am\",\"is\",\"are\"]","correct_answer":"is","explanation":"She is."},{"id":51,"module_id":5,"type":"fill-gap","question":"We ___ from Almaty.","options":"[\"am\",\"is\",\"are\"]","correct_answer":"are","explanation":"We are."},{"id":52,"module_id":5,"type":"fill-gap","question":"It ___ a beautiful day.","options":"[\"am\",\"is\",\"are\"]","correct_answer":"is","explanation":"It is."},{"id":53,"module_id":5,"type":"fill-gap","question":"You ___ a good student.","options":"[\"am\",\"is\",\"are\"]","correct_answer":"are","explanation":"You are."},{"id":54,"module_id":5,"type":"fill-gap","question":"They ___ in the classroom.","options":"[\"am\",\"is\",\"are\"]","correct_answer":"are","explanation":"They are."},{"id":55,"module_id":5,"type":"multiple-choice","question":"Ğ¡Ğ¾ÑÑ‚Ğ°Ğ²ÑŒ Ğ²Ğ¾Ğ¿Ñ€Ğ¾Ñ: you / Are / a student?","options":"[\"You are a student?\",\"Are you a student?\",\"A student are you?\"]","correct_answer":"Are you a student?","explanation":"To ask a question, put \"Are\" at the start: \"Are you...?\""},{"id":56,"module_id":5,"type":"multiple-choice","question":"Ğ¡Ğ¾ÑÑ‚Ğ°Ğ²ÑŒ Ğ²Ğ¾Ğ¿Ñ€Ğ¾Ñ: she / Is / your sister?","options":"[\"Is she your sister?\",\"She is your sister?\",\"Sister is she your?\"]","correct_answer":"Is she your sister?","explanation":"Start with \"Is\": \"Is she...?\""},{"id":57,"module_id":5,"type":"multiple-choice","question":"Ğ¡Ğ¾ÑÑ‚Ğ°Ğ²ÑŒ Ğ²Ğ¾Ğ¿Ñ€Ğ¾Ñ: they / Are / at home?","options":"[\"At home are they?\",\"They are at home?\",\"Are they at home?\"]","correct_answer":"Are they at home?","explanation":"Start with \"Are\": \"Are they...?\""},{"id":58,"module_id":5,"type":"multiple-choice","question":"Ğ¡Ğ¾ÑÑ‚Ğ°Ğ²ÑŒ Ğ²Ğ¾Ğ¿Ñ€Ğ¾Ñ: he / Is / from Astana?","options":"[\"He is from Astana?\",\"Is he from Astana?\",\"Is Astana from he?\"]","correct_answer":"Is he from Astana?","explanation":"Start with \"Is\": \"Is he...?\""},{"id":59,"module_id":5,"type":"multiple-choice","question":"Ğ¡Ğ¾ÑÑ‚Ğ°Ğ²ÑŒ Ğ²Ğ¾Ğ¿Ñ€Ğ¾Ñ: it / Is / a dog?","options":"[\"Is it a dog?\",\"It is a dog?\",\"Dog is it a?\"]","correct_answer":"Is it a dog?","explanation":"Start with \"Is\": \"Is it...?\""},{"id":60,"module_id":6,"type":"multiple-choice","question":"My father's father is my ___.","options":"[\"uncle\",\"grandfather\",\"cousin\",\"brother\"]","correct_answer":"grandfather","explanation":"Father's father = Grandfather."},{"id":61,"module_id":6,"type":"multiple-choice","question":"My mother's daughter is my ___.","options":"[\"aunt\",\"grandmother\",\"sister\",\"mother\"]","correct_answer":"sister","explanation":"Mother's daughter = Sister (or me, if I am a girl, but sister is the best fit)."},{"id":62,"module_id":6,"type":"multiple-choice","question":"My brother's son is my ___.","options":"[\"nephew\",\"niece\",\"cousin\",\"grandson\"]","correct_answer":"nephew","explanation":"Brother's son = Nephew."},{"id":63,"module_id":6,"type":"multiple-choice","question":"We are a happy ___.","options":"[\"home\",\"house\",\"family\",\"school\"]","correct_answer":"family","explanation":"Happy family."},{"id":64,"module_id":6,"type":"multiple-choice","question":"My ___ is 8 years old.","options":"[\"mother\",\"father\",\"sister\",\"grandmother\"]","correct_answer":"sister","explanation":"Sister fits best for an 8 year old (Mother/Father/Granny are older)."},{"id":65,"module_id":6,"type":"multiple-choice","question":"Who is \"She is your female parent\"?","options":"[\"mother\",\"father\",\"sister\"]","correct_answer":"mother","explanation":"Female parent = mother."},{"id":66,"module_id":6,"type":"multiple-choice","question":"Who is \"He is your male parent\"?","options":"[\"mother\",\"father\",\"brother\"]","correct_answer":"father","explanation":"Male parent = father."},{"id":67,"module_id":6,"type":"multiple-choice","question":"Who is \"A girl with same parents\"?","options":"[\"sister\",\"aunt\",\"grandmother\"]","correct_answer":"sister","explanation":"Girl with same parents = sister."},{"id":68,"module_id":6,"type":"multiple-choice","question":"Who is \"A boy with same parents\"?","options":"[\"brother\",\"uncle\",\"grandfather\"]","correct_answer":"brother","explanation":"Boy with same parents = brother."},{"id":69,"module_id":6,"type":"multiple-choice","question":"What is \"A group of relatives\"?","options":"[\"family\",\"school\",\"class\"]","correct_answer":"family","explanation":"Group of relatives = family."},{"id":70,"module_id":6,"type":"fill-gap","question":"My ___ name is Asel.","options":"[\"mother\",\"father\",\"son\"]","correct_answer":"mother","explanation":"Asel is a female name, clearly referring to mother here."},{"id":71,"module_id":6,"type":"fill-gap","question":"I have one ___ and one sister.","options":"[\"brother\",\"house\",\"school\"]","correct_answer":"brother","explanation":"One brother."},{"id":72,"module_id":6,"type":"fill-gap","question":"My ___ is 65 years old.","options":"[\"grandfather\",\"son\",\"baby\"]","correct_answer":"grandfather","explanation":"65 years old suggests grandfather."},{"id":73,"module_id":6,"type":"fill-gap","question":"We are a big ___.","options":"[\"family\",\"room\",\"book\"]","correct_answer":"family","explanation":"Big family."},{"id":74,"module_id":6,"type":"fill-gap","question":"My parents have two children: me and my ___.","options":"[\"sister\",\"mother\",\"grandmother\"]","correct_answer":"sister","explanation":"The other child is a sister/brother. Sister is the option."},{"id":75,"module_id":6,"type":"true-false","question":"Grandmother is father's mother.","options":"[\"True\",\"False\"]","correct_answer":"True","explanation":"Yes, father's or mother's mother."},{"id":76,"module_id":6,"type":"true-false","question":"Your sister's brother is your cousin.","options":"[\"True\",\"False\"]","correct_answer":"False","explanation":"Your sister's brother is YOUR brother (or you)."},{"id":77,"module_id":6,"type":"true-false","question":"Parents are mother and father.","options":"[\"True\",\"False\"]","correct_answer":"True","explanation":"Correct."},{"id":78,"module_id":6,"type":"true-false","question":"Your uncle is your mother's brother.","options":"[\"True\",\"False\"]","correct_answer":"True","explanation":"Mother's or Father's brother is an uncle."},{"id":79,"module_id":6,"type":"true-false","question":"A daughter is a male child.","options":"[\"True\",\"False\"]","correct_answer":"False","explanation":"Daughter is a female child. Son is male."},{"id":115,"module_id":8,"type":"text-input","question":"Complete: My ______ is Asel.","options":null,"correct_answer":"name","explanation":"My name is... (ĞœĞµĞ½Ñ Ğ·Ğ¾Ğ²ÑƒÑ‚...)"},{"id":116,"module_id":8,"type":"text-input","question":"Complete: I ______ 12 years old.","options":null,"correct_answer":"am","explanation":"I am... (ĞœĞ½Ğµ...)"},{"id":117,"module_id":8,"type":"text-input","question":"Complete: I am ______ Kazakhstan.","options":null,"correct_answer":"from","explanation":"I am from... (Ğ¯ Ğ¸Ğ·...)"},{"id":118,"module_id":8,"type":"text-input","question":"Complete: I ______ a brother.","options":null,"correct_answer":"have","explanation":"I have... (Ğ£ Ğ¼ĞµĞ½Ñ ĞµÑÑ‚ÑŒ...)"},{"id":119,"module_id":8,"type":"text-input","question":"Complete: I ______ football.","options":null,"correct_answer":"like","explanation":"I like... (ĞœĞ½Ğµ Ğ½Ñ€Ğ°Ğ²Ğ¸Ñ‚ÑÑ...)"},{"id":120,"module_id":8,"type":"text-input","question":"Order the words: name / My / is / Daniyar","options":null,"correct_answer":"My name is Daniyar.","explanation":"My name is Daniyar."},{"id":121,"module_id":8,"type":"text-input","question":"Order the words: am / I / old / 11 / years","options":null,"correct_answer":"I am 11 years old.","explanation":"I am 11 years old."},{"id":122,"module_id":8,"type":"text-input","question":"Order the words: from / I / Astana / am","options":null,"correct_answer":"I am from Astana.","explanation":"I am from Astana."},{"id":123,"module_id":8,"type":"text-input","question":"Order the words: a / I / sister / have","options":null,"correct_answer":"I have a sister.","explanation":"I have a sister."},{"id":124,"module_id":8,"type":"text-input","question":"Order the words: cats / like / I","options":null,"correct_answer":"I like cats.","explanation":"I like cats."},{"id":125,"module_id":8,"type":"text-input","question":"Correct the mistake: my name is aruzhan","options":null,"correct_answer":"My name is Aruzhan.","explanation":"Start with capital letter (M) and name (Aruzhan)."},{"id":126,"module_id":8,"type":"text-input","question":"Correct the mistake: i am 10 years old","options":null,"correct_answer":"I am 10 years old.","explanation":"Capital \"I\"."},{"id":127,"module_id":8,"type":"text-input","question":"Correct the mistake: i from almaty","options":null,"correct_answer":"I am from Almaty.","explanation":"I am from Almaty. (Forgot \"am\" and capitals)"},{"id":128,"module_id":8,"type":"text-input","question":"Correct the mistake: i have brother","options":null,"correct_answer":"I have a brother.","explanation":"I have *a* brother."},{"id":129,"module_id":8,"type":"text-input","question":"Correct the mistake: i like football","options":null,"correct_answer":"I like football.","explanation":"Capital \"I\"."}].forEach(e => {
        stmtExercise.run(e.id, e.module_id, e.type, e.question, e.options, e.correct_answer, e.explanation);
    });
    stmtExercise.finalize();

    // 5. Close DB inside serialize
    db.close((err) => {
        if (err) {
            console.error("âŒ Error closing DB:", err.message);
        } else {
            console.log("âœ… Database successfully updated with latest content and closed.");
        }
    });
});
